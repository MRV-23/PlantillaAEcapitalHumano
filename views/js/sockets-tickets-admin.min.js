class Tickets{static generarNuevoTicket(t,e){let a=e.val(),o=new FormData(t);o.append("idEmpleado",$("#usuarioTicketCreado").val()),$.ajax({url:ruta_server+"controllers/AjaxTickets.php",method:"POST",data:o,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(e){e.error?swal({type:e.tipo,title:e.mensaje,text:e.mensaje2}).catch(swal.noop):(swal({type:e.tipo,title:e.mensaje,text:e.mensaje2}).catch(swal.noop),t.reset(),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{actualizarColaTickets:!0}}).done(function(t){$("#mostrarDatosTickets").html(t.html),socket.emit("nuevoTicket",{categoria:a,folio:e.folio},t=>{console.log("categoria: "+a+"folio: "+e.folio),console.log("Respuesta: "+t),1==a?$("#labelTotalTicketsTecnico").text(t):2==a?$("#labelTotalTicketsGiro").text(t):3==a&&$("#labelTotalTicketsDesarrollo").text(t)}),socket.emit("actualizarColaTickets",null),$(".mostrarDatosTicket,.mostrarDatosTicketAtendidos,.mostrarDatosTicketFinalizados").click(function(){Tickets.mostrarDatosTicket($(this).parent().parent().attr("id"))}),$(".administradorAsignaTicket").click(function(){Tickets.atenderTicketSoporte($(this).attr("id"),$(this).parent().parent().attr("id"),$(this).parent().parent().attr("value"))})}).fail(function(t){console.log("Ocurrio un error:",t)}))}})}static mostrarDatosTicket(t){let e=$(".imagenTicket");$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{idTicket:t}}).done(function(t){$(".divDatosTicketEncabezado").html(t.html),$(".divDatosTicket").html(t.html2),$(".divDatosTicket2").html(t.html3),null!=t.imagen?(e.attr("src",ruta_server+"views/imagenes-usuarios/mini/"+t.imagen),e.attr("alt",ruta_server+"views/imagenes-usuarios/"+t.imagen)):(e.attr("src",ruta_server+"views/img/user.png"),e.attr("alt",ruta_server+"views/img/user.png")),$("#tipoUsuarioTicket").attr("value")!=$("#categoriaTicketModal").attr("value")?$("#atenderNumeroTicketModal,#atenderNumeroTicketModal2,#atenderNumeroTicketModal3").prop("disabled",!0):($("#atenderNumeroTicketModal,#atenderNumeroTicketModal2,#atenderNumeroTicketModal3").prop("disabled",!1),$("#atenderNumeroTicketModal,#atenderNumeroTicketModal2,#atenderNumeroTicketModal3").attr("value",t.numero)),2==$("#situacionApertura").attr("value")?($("#atenderNumeroTicketModal3").show(),$("#atenderNumeroTicketModal2").hide()):($("#atenderNumeroTicketModal3").hide(),$("#atenderNumeroTicketModal2").show()),$("#mostrarSolucionTicket").click(function(){$("#solucionTicketPorCerrar").modal("show"),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{mostrarSolucionTicket:$("#folioTicket").attr("value")}}).done(function(t){$("#descripcionTicket").val(t.solucion),$("#causaTicket").val(t.causa),$("#problemaTicket").val(t.problema)}).fail(function(t){console.log("Ocurrio un error:",t),swal({type:"error",title:"Ocurrio un error",text:"¡Intentalo nuevamente!"}).catch(swal.noop)}),$("#guardarSolucionTicket").one("click",function(){$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{actualizarSolucion:$("#descripcionTicket").val(),actualizarCausa:$("#causaTicket").val(),actualizarProblema:$("#problemaTicket").val(),ticketAactualizar:$("#folioTicket").attr("value")}}).done(function(t){$("#solucionTicketPorCerrar").modal("hide"),swal({title:"",text:"Guardado",type:"success",timer:2e3,showConfirmButton:!1,allowOutsideClick:!1}).catch(swal.noop)}).fail(function(t){console.log("Ocurrio un error:",t),swal({type:"error",title:"Ocurrio un error",text:"¡Intentalo nuevamente!"}).catch(swal.noop)})})})}).fail(function(t){console.log("Ocurrio un error:",t)})}static actualizarQuienAtiendeSoporteTecnico(t,e){e.find(".labelTicket").eq(0).text(t.ultimos3[0].numero),e.find(".labelTicket").eq(1).text(t.ultimos3[1].numero),e.find(".labelTicket").eq(2).text(t.ultimos3[2].numero)}static actualizarQuienAtiendeGiro(t,e){e.find(".labelTicket").eq(0).text(t.ultimos2[0].numero),e.find(".labelTicket").eq(1).text(t.ultimos2[1].numero)}static actualizarQuienAtiendeDesarrollo(t,e){e.find(".labelTicket").eq(0).text(t.ultimos1[0].numero)}static atenderTicketSoporte(t,e,a){socket.emit("atenderTicketSoporte",{persona:t,numeroPorAtender:e,categoria:a},e=>{e.numero<1?swal("No hay tickets","","info"):($("#labelTicket"+t).text(e.numero),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{numeroTicket:e.numero,categoria:a,atiende:t}}).done(function(t){$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{actualizarColaTicketsAbiertos:!0}}).done(function(t){$("#mostrarDatosTickets").html(t.html),$("#mostrarDatosTicketsPorAtender").html(t.html2),socket.emit("actualizarColaTicketsAbiertos",null),$(".mostrarDatosTicket,.mostrarDatosTicketAtendidos,.mostrarDatosTicketFinalizados").click(function(){Tickets.mostrarDatosTicket($(this).parent().parent().attr("id"))}),$(".administradorAsignaTicket").click(function(){Tickets.atenderTicketSoporte($(this).attr("id"),$(this).parent().parent().attr("id"),$(this).parent().parent().attr("value"))})}).fail(function(t){console.log("Ocurrio un error:",t)})}).fail(function(t){console.log("Ocurrio un error:",t)}))})}static cerrarTicketSoporte(){$("#descripcionTicket").val(""),$("#problemaTicket").val($("#getAsunto").text()),$("#causaTicket").val("");let t="",e="",a="";$("#solucionTicketPorCerrar").modal("show"),$("#guardarSolucionTicket").click(function(){t=$("#descripcionTicket").val(),e=$("#problemaTicket").val(),a=$("#causaTicket").val(),Tickets.formularioCerrarTicket(t,e,a)})}static formularioCerrarTicket(t,e,a){if(t.length>5&&e.length>5&&a.length>5){$("#solucionTicketPorCerrar").modal("hide");let o=$("#categoriaTicketModal").attr("value");$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{idTicketCerrar:$("#folioTicket").attr("value"),solucion:t,problema:e,causa:a}}).done(function(t){$("#mostrarDatosTicketAtendidos").modal("hide"),swal({title:"",text:"Finalizado",type:"success",timer:2e3,showConfirmButton:!1,allowOutsideClick:!1}).catch(swal.noop),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{actualizarColaTicketsCerrados:!0}}).done(function(t){$("#mostrarDatosTicketsPorAtender").html(t.html),$("#mostrarDatosTicketsFinalizados").html(t.html2);let e=$("#codigoUnitario").attr("name");socket.emit("actualizarColaTicketsCerrados",{categoria:o,usuario:e}),$("#labelTicket"+e).text("0"),1==o?(GraficasTickets.recargarSistemasPastel(),GraficasTickets.recargarSoporteBarras()):2==o&&(GraficasTickets.recargarGiroPastel(),GraficasTickets.recargarGiroBarras()),$(".mostrarDatosTicket,.mostrarDatosTicketAtendidos,.mostrarDatosTicketFinalizados").click(function(){Tickets.mostrarDatosTicket($(this).parent().parent().attr("id"))}),$(".administradorAsignaTicket").click(function(){Tickets.atenderTicketSoporte($(this).attr("id"),$(this).parent().parent().attr("id"),$(this).parent().parent().attr("value"))})}).fail(function(t){console.log("Ocurrio un error:",t)})}).fail(function(t){console.log("Ocurrio un error:",t)})}else swal({type:"success",title:"Debes llenar los 3 campos",text:""}).catch(swal.noop)}static listarEmpleados(t,e){let a=new FormData;a.append("asignarUsuarioTicket",t),$.ajax({url:ruta_server+"controllers/AjaxTickets.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(t){e.html(t)}})}static aplicarFiltros(t,e){let a=$("#paginacionTickets");$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{fechaTicketCerrado:t,nombrePersonaRegistroTicket:e,paginaActual:1,registrosPorPagina:a.find("ul").attr("registros"),target:a.find("ul").attr("target")}}).done(function(t){$("#mostrarHistorialTickets").html(t.data),$("#paginacionTickets,#paginacionTickets2").html(t.mostrar),$(".formularioDinamico").click(function(t){switch($(this).parent().parent().attr("target")){case"solicitudes":paginador(t,this);break;case"usuarios":paginador2(t,this);break;case"correos":paginador3(t,this);break;case"equipos":paginador4(t,this);break;case"usuariosPass":paginador5(t,this);break;case"paquetesInternos":paginador6(t,this);break;case"paquetesExternos":paginador7(t,this);break;case"tickets":paginador8(t,this)}}),$(".mostrarDatosTicketFinalizados").click(function(){Tickets.mostrarDatosTicket($(this).parent().parent().attr("id"))}),$(".mostrarDatosHistorialTickets").click(function(){Tickets.historialTicket($(this).attr("value"))})}).fail(function(t){console.log("Ocurrio un error:",t)})}static cerrarTicketReabierto(t){swal({title:"¿Estas seguro que NO deseas abrir el ticket?",text:"El ticket se considerará por cerrado",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Sí, continuar!"}).then(e=>{$("#ventanaReabrirTicket").modal("hide"),$("#mostrarTicketsPorReabrir").modal("hide"),$("#motivoAbrirTicket").modal("show"),$("#guardarMotivoReabrirTicket").one("click",function(){swal({title:'<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>',text:" Por favor espere...",type:"",showConfirmButton:!1,allowOutsideClick:!1}),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{idReabrirTicket2:t,flag:0,motivo:$("#motivoTicket").val()}}).done(function(t){t.error?swal({type:t.tipo,title:t.mensaje,text:t.mensaje2}).catch(swal.noop):(socket.emit("reabrirTicket"),Tickets.actualizarListaAbiertos(),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{actualizarColaTicketsCerrados:!0}}).done(function(t){$("#mostrarDatosTicketsPorAtender").html(t.html),$("#mostrarDatosTicketsFinalizados").html(t.html2),socket.emit("actualizarColaTicketsCerrados",{categoria:null}),$(".mostrarDatosTicket,.mostrarDatosTicketAtendidos,.mostrarDatosTicketFinalizados").click(function(){Tickets.mostrarDatosTicket($(this).parent().parent().attr("id"))}),$(".mostrarDatosHistorialTickets").click(function(){Tickets.historialTicket($(this).attr("value"))})}).fail(function(t){console.log("Ocurrio un error:",t)})),swal.close(),$("#motivoTicket").val(""),$("#motivoAbrirTicket").modal("hide")}).fail(function(t){console.log(t),swal({type:"error",title:"Ocurrio un error",text:"No se encontró la ruta del archivo"}).catch(swal.noop)})})}).catch(t=>{})}static actualizarListaAbiertos(){$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{totalReabiertos:!0}}).done(function(t){let e="disabled",a=' <i class="fa fa-circle fa-lg text-grey"></i>';t.total>0&&(e="",a=' <i class="fa fa-circle fa-lg text-green"></i>'),$("#recargarBotonTicketReabrir").html('<button type="button" id="ticketPendientesPorReabrir" class="btn btn-default btn-lg"'+e+'><b style="font-size:22px;">'+t.total+"</b> Ticket por reabrir "+a+"</button>"),$("#datosTicketsReabiertos").html(t.lista),$("#ticketPendientesPorReabrir").click(function(){Tickets.listaReabiertos()}),$(".mostrarDatosTicketFinalizados").click(function(){Tickets.mostrarDatosTicket($(this).parent().parent().attr("id"))})}).fail(function(t){console.log(t),swal({type:"error",title:"Ocurrio un error",text:"No se encontró la ruta del archivo"}).catch(swal.noop)})}static historialTicket(t){$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{historialTickets:t}}).done(function(t){$("#datosTicketsHistorial").html(t.html),$(".motivoAperturaCierreTicket").click(function(){Tickets.mostrarMotivoAperturaOcierreTicket($(this).attr("value"))})}).fail(function(t){console.log(t),swal({type:"error",title:"Ocurrio un error",text:"No se encontró la ruta del archivo"}).catch(swal.noop)})}static mostrarMotivoAperturaOcierreTicket(t){$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{detallesAperturaCierre:t}}).done(function(t){$("#historialMotivoAperturaCierre").val(t.valor)}).fail(function(t){console.log(t),swal({type:"error",title:"Ocurrio un error",text:"No se encontró la ruta del archivo"}).catch(swal.noop)})}static listaReabiertos(){$("#mostrarTicketsPorReabrir").modal("show")}static reabrirTicket(){let t=$("#folioTicket").attr("value");swal({title:"¿Estas seguro que deseas abrir el ticket?",text:"",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Sí, continuar!"}).then(e=>{$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{verificarSituacionTicket:t}}).done(function(e){e.error?swal({type:e.tipo,title:e.mensaje,text:e.mensaje2}).catch(swal.noop):($("#ventanaReabrirTicket").modal("hide"),$("#mostrarTicketsPorReabrir").modal("hide"),$("#mostrarDatosTicketFinalizados").modal("hide"),$("#motivoAbrirTicket").modal("show"),$("#guardarMotivoReabrirTicket").one("click",function(){$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{idReabrirTicket2:t,flag:1,motivo:$("#motivoTicket").val()}}).done(function(t){t.error?swal({type:t.tipo,title:t.mensaje,text:t.mensaje2}).catch(swal.noop):(socket.emit("reabrirTicket"),Tickets.actualizarListaAbiertos(),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{actualizarColaTicketsCerrados:!0}}).done(function(t){$("#mostrarDatosTicketsPorAtender").html(t.html),$("#mostrarDatosTicketsFinalizados").html(t.html2),socket.emit("actualizarColaTicketsCerrados",{categoria:null}),$(".mostrarDatosTicket,.mostrarDatosTicketAtendidos,.mostrarDatosTicketFinalizados").click(function(){Tickets.mostrarDatosTicket($(this).parent().parent().attr("id"))})}).fail(function(t){console.log("Ocurrio un error:",t)}),$("#motivoTicket").val(""),$("#motivoAbrirTicket").modal("hide"))}).fail(function(t){swal({type:"error",title:"Ocurrio un error",text:"No se encontró la ruta del archivo"}).catch(swal.noop),$("#mostrarDatosTicket").modal("hide")})}))}).fail(function(t){console.log(t),swal({type:"error",title:"Ocurrio un error",text:"No se encontró la ruta del archivo"}).catch(swal.noop)})}).catch(t=>{console.log(t)})}static volverAcerrarTicket(){let t=$("#folioTicket").attr("value");$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{idVolverAcerrar:t}}).done(function(t){$("#mostrarDatosTicketAtendidos").modal("hide"),t.error?swal({type:t.tipo,title:t.mensaje,text:t.mensaje2}).catch(swal.noop):$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{actualizarColaTicketsCerrados:!0}}).done(function(t){$("#mostrarDatosTicketsPorAtender").html(t.html),$("#mostrarDatosTicketsFinalizados").html(t.html2),socket.emit("actualizarColaTicketsCerrados",{categoria:null}),$(".mostrarDatosTicket,.mostrarDatosTicketAtendidos,.mostrarDatosTicketFinalizados").click(function(){Tickets.mostrarDatosTicket($(this).parent().parent().attr("id"))}),$(".mostrarDatosHistorialTickets").click(function(){Tickets.historialTicket($(this).attr("value"))})}).fail(function(t){console.log("Ocurrio un error:",t)})}).fail(function(t){console.log(t),swal({type:"error",title:"Ocurrio un error",text:"No se encontró la ruta del archivo"}).catch(swal.noop)})}static inicarClase(){let t=$("#formularioNuevoTicket"),e=$("#codigoUnitario").attr("name"),a=$("#targetGenerarTicketUsuario"),o=$("#areaSistemas"),i=$("#cargarSubCategoriaTickets"),r=$("#segmentoTickets"),c=$("#grupoSoporteTecnico"),s=$("#grupoGiro"),l=$("#grupoDesarrollo");t.submit(function(t){t.preventDefault(),Tickets.generarNuevoTicket($(this)[0],o)}),socket.on("ticketsGenerados",function(t){if(1==t.categoria){if(223==$("#credencialesUsuario").attr("value")){let t=$("#customTicketUlises")[0];const e=t.play();null!==e&&e.catch(()=>{t.play()})}$("#labelTotalTicketsTecnico").text(t.ticket)}else if(2==t.categoria){if(180==$("#credencialesUsuario").attr("value")){let t=$("#customTicketChava")[0];const e=t.play();null!==e&&e.catch(()=>{t.play()})}$("#labelTotalTicketsGiro").text(t.ticket)}else if(3==t.categoria){if(168==$("#credencialesUsuario").attr("value")){let t=$("#customTicketUriel")[0];const e=t.play();null!==e&&e.catch(()=>{t.play()})}$("#labelTotalTicketsDesarrollo").text(t.ticket)}}),socket.on("actualizarColaTicketsEnterado",function(){$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{actualizarColaTickets:!0}}).done(function(t){$("#mostrarDatosTickets").html(t.html),$(".mostrarDatosTicket,.mostrarDatosTicketAtendidos,.mostrarDatosTicketFinalizados").click(function(){Tickets.mostrarDatosTicket($(this).parent().parent().attr("id"))}),$(".administradorAsignaTicket").click(function(){Tickets.atenderTicketSoporte($(this).attr("id"),$(this).parent().parent().attr("id"),$(this).parent().parent().attr("value"))})}).fail(function(t){console.log("Ocurrio un error:",t)})}),socket.on("actualizarColaTicketsAbiertos",function(){$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{actualizarColaTicketsAbiertos:!0}}).done(function(t){$("#mostrarDatosTickets").html(t.html),$("#mostrarDatosTicketsPorAtender").html(t.html2),$(".mostrarDatosTicket,.mostrarDatosTicketAtendidos,.mostrarDatosTicketFinalizados").click(function(){Tickets.mostrarDatosTicket($(this).parent().parent().attr("id"))}),$(".administradorAsignaTicket").click(function(){Tickets.atenderTicketSoporte($(this).attr("id"),$(this).parent().parent().attr("id"),$(this).parent().parent().attr("value"))})}).fail(function(t){console.log("Ocurrio un error:",t)})}),socket.on("actualizarColaTicketsCerrados",function(){$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{actualizarColaTicketsCerrados:!0}}).done(function(t){$("#mostrarDatosTicketsPorAtender").html(t.html),$("#mostrarDatosTicketsFinalizados").html(t.html2),$(".mostrarDatosTicket,.mostrarDatosTicketAtendidos,.mostrarDatosTicketFinalizados").click(function(){Tickets.mostrarDatosTicket($(this).parent().parent().attr("id"))}),$(".administradorAsignaTicket").click(function(){Tickets.atenderTicketSoporte($(this).attr("id"),$(this).parent().parent().attr("id"),$(this).parent().parent().attr("value"))}),$(".mostrarDatosHistorialTickets").click(function(){Tickets.historialTicket($(this).attr("value"))})}).fail(function(t){console.log("Ocurrio un error:",t)})}),$("#atenderTicketSoporte").click(function(){Tickets.atenderTicketSoporte(e,0,1)}),$("#atenderTicketGiro").click(function(){Tickets.atenderTicketSoporte(e,0,2)}),$("#atenderTicketDesarrollo").click(function(){Tickets.atenderTicketSoporte(e,0,3)}),socket.on("actualizarMarcadoresSoporteTecnico",function(t){$("#labelTotalTicketsTecnico").text(t.actual),Tickets.actualizarQuienAtiendeSoporteTecnico(t,c)}),socket.on("actualizarMarcadoresGiro",function(t){$("#labelTotalTicketsGiro").text(t.actual),Tickets.actualizarQuienAtiendeGiro(t,s)}),socket.on("actualizarMarcadoresDesarrollo",function(t){$("#labelTotalTicketsDesarrollo").text(t.actual),Tickets.actualizarQuienAtiendeDesarrollo(t,l)}),socket.on("ultimos3",function(t){Tickets.actualizarQuienAtiendeSoporteTecnico(t,c)}),socket.on("ultimos2",function(t){Tickets.actualizarQuienAtiendeGiro(t,s)}),socket.on("ultimos1",function(t){Tickets.actualizarQuienAtiendeDesarrollo(t,l)}),socket.on("reabrirTicket",function(){console.log("respuesta"),Tickets.actualizarListaAbiertos()}),$(".mostrarDatosTicket,.mostrarDatosTicketAtendidos,.mostrarDatosTicketFinalizados").click(function(){Tickets.mostrarDatosTicket($(this).parent().parent().attr("id"))}),$("#atenderNumeroTicketModal").click(function(){Tickets.atenderTicketSoporte(e,$("#atenderNumeroTicketModal").attr("value"),$("#categoriaTicketModal").attr("value")),$("#mostrarTicketSoporte").modal("hide")}),$(".administradorAsignaTicket").click(function(){Tickets.atenderTicketSoporte($(this).attr("id"),$(this).parent().parent().attr("id"),$(this).parent().parent().attr("value"))}),$("#atenderNumeroTicketModal2").click(function(){Tickets.cerrarTicketSoporte()}),$("#atenderNumeroTicketModal3").click(function(){Tickets.volverAcerrarTicket()}),$("#atenderNumeroTicketModal3").hide(),$("#sucursalGenerarTicket").change(function(){""!=$(this).val()?Tickets.listarEmpleados($(this).val(),a):a.html('<select class="form-control textoMay" name="usuarioTicketCreado" id="usuarioTicketCreado" required readonly>')}),$("#formularioCancelarTicket").click(function(){t[0].reset(),a.html('<select class="form-control textoMay" name="usuarioTicketCreado" id="usuarioTicketCreado" required readonly>'),i.html('<select class="form-control textoMay" name="subCategoriaTickets" id="subCategoriaTickets" required readonly><option></option></select>'),r.html("")}),o.change(function(){if(""!=$(this).val())if(1==$(this).val())r.html(""),i.html('<select class="form-control textoMay" name="subCategoriaTickets" id="subCategoriaTickets" required><option></option><option value="1">Carpetas en Red</option><option value="2">CONTPAQi Adminpaq</option><option value="3">CONTPAQi Contabilidad y Bancos</option><option value="4">CONTPAQi Facturación</option><option value="5">CONTPAQi Nomipaq</option><option value="6">Correo electrónico</option><option value="7">Impresoras y Toner</option><option value="8">Paquetería Office(Excel,Word, Power Point, etc.)</option><option value="9">Red e Internet</option><option value="10">Spark</option><option value="11">XML</option><option value="12">Otra</option></select>');else if(2==$(this).val()){i.html('<select class="form-control textoMay" name="subCategoriaTickets" id="subCategoriaTickets" required><option></option><option value="1">Nóminas</option><option value="2">Procesos IMSS</option><option value="3">Módulo Pre Alta</option><option value="4">Módulo Recibos CFDI</option><option value="5">Módulo Archivo Electrónico</option><option value="6">Otra</option></select>');let t=$("#subCategoriaTickets");t.change(function(){""!=t.val()?1==t.val()?r.html('<div class="row"><div class="col-md-12"><label for="passActual">4.1.-Segmento: </label> <i class="fa fa-check-circle text-green"></i><div id="cargarSubCategoriaTickets"><select class="form-control textoMay" name="segmentoTickets" required><option></option><option value="1">Cálculos Ordinarios</option><option value="2">Cálculos Extraordinarios</option><option value="3">Finiquitos</option><option value="4">Aguinaldos</option><option value="5">Conexión a escritorio remoto</option><option value="6">Usuarios y contraseñas</option><option value="7">Reportes</option><option value="8">Timbrado</option><option value="9">Alta de Clientes / Tipos de Nómina</option><option value="10">Alta de Puestos</option><option value="11">Alta de Turnos</option><option value="12">Movimientos masivos</option><option value="13">Otros</option></select></div></div></div>'):2==t.val()?r.html('<div class="row"><div class="col-md-12"><label for="passActual">4.1.-Segmento: </label> <i class="fa fa-check-circle text-green"></i><div id="cargarSubCategoriaTickets"><select class="form-control textoMay" name="segmentoTickets" required><option></option><option value="1">Altas</option><option value="2">Bajas</option><option value="3">Modificaciones salariales</option><option value="4">Reingresos</option><option value="5">Alta de Registros patronales</option><option value="6">INFONAVIT</option><option value="7">FONACOT</option><option value="8">Movimientos masivos</option><option value="9">Otros</option></select></div></div></div>'):3==t.val()?r.html('<div class="row"><div class="col-md-12"><label for="passActual">4.1.-Segmento: </label> <i class="fa fa-check-circle text-green"></i><div id="cargarSubCategoriaTickets"><select class="form-control textoMay" name="segmentoTickets" required><option></option><option value="1">Captura de información</option><option value="2">Correo electrónico</option><option value="3">Exportación de empleados</option><option value="4">Otros</option></select></div></div></div>'):4==t.val()?r.html('<div class="row"><div class="col-md-12"><label for="passActual">4.1.-Segmento: </label> <i class="fa fa-check-circle text-green"></i><div id="cargarSubCategoriaTickets"><select class="form-control textoMay" name="segmentoTickets" required><option></option><option value="1">Error en timbre</option><option value="2">XML y PDF</option><option value="3">Reportes</option><option value="4">Falta de timbres</option><option value="5">Otros</option></select></div></div></div>'):5==t.val()?r.html('<div class="row"><div class="col-md-12"><label for="passActual">4.1.-Segmento: </label> <i class="fa fa-check-circle text-green"></i><div id="cargarSubCategoriaTickets"><select class="form-control textoMay" name="segmentoTickets" required><option></option><option value="1">Alta de nuevos documentos</option><option value="2">Otros</option></select></div></div></div>'):r.html(""):r.html("")})}else 3==$(this).val()&&(r.html(""),i.html('<select class="form-control textoMay" name="subCategoriaTickets" id="subCategoriaTickets" required><option></option><option value="1">Ingreso al sistema</option><option value="2">Módulo agenda empresarial</option><option value="3">Módulo inicio</option><option value="4">Módulo mi cuenta</option><option value="5">Módulo paquetería</option><option value="6">Módulo solicitudes</option><option value="7">Módulo tickets</option><option value="8">Otra</option></select>'));else i.html('<select class="form-control textoMay" name="subCategoriaTickets" id="subCategoriaTickets" required readonly><option></option></select>'),r.html("")}),$("#aplicarFiltrosTickets").click(function(){""===$("#fechasTickets").val()&&""===$("#buscadorUsuariosTickets").val()||($("#fechasTickets").val(""),$("#buscadorUsuariosTickets").val(""),Tickets.aplicarFiltros($("#fechasTickets").val(),$("#buscadorUsuariosTickets").val()))}),$("#buscadorUsuariosTickets").on("input",function(){Tickets.aplicarFiltros($("#fechasTickets").val(),$("#buscadorUsuariosTickets").val())}),$("#fechasTickets").change(function(){MetodosDiversos.init_validate_date($(this).val())&&Tickets.aplicarFiltros($("#fechasTickets").val(),$("#buscadorUsuariosTickets").val())}),$("#ticketPendientesPorReabrir").click(function(){Tickets.listaReabiertos()}),$(".reabrirTicketModal").click(function(){Tickets.reabrirTicket()}),$("#noReabrirTicketModal").click(function(){Tickets.cerrarTicketReabierto($("#folioTicket").attr("value"))}),$(".mostrarDatosHistorialTickets").click(function(){Tickets.historialTicket($(this).attr("value"))})}}Tickets.inicarClase();