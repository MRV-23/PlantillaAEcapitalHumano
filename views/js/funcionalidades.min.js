function fileOnload(a){var e=a.target.result;$("#imgenSalida").attr("src",e)}function eliminarUsuario(a){let e=a;swal({title:"¿Estas seguro de borrar el registro?",text:"El registro sera eliminado de empleados activos y se deberá llenar una entrevista de salida",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Sí, borrar!"}).then(a=>{if(a){let a=new FormData;a.append("idRegistroEliminar",e),$.ajax({url:ruta_server+"controllers/ajaxUsuarios.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){$("#exampleModalCenter3").modal("show"),$("#target3").html(a);let t=document.getElementById("formularioSalida");$("#formularioSalida").submit(function(a){a.preventDefault(),swal({title:'<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>',text:" Por favor espere...",type:"",showConfirmButton:!1,allowOutsideClick:!1});let o=new FormData(t);o.append("idRegistroEliminar2",e),$.ajax({url:ruta_server+"controllers/ajaxUsuarios.php",method:"POST",data:o,cache:!1,contentType:!1,processData:!1,success:function(a){0==a?swal({type:"error",title:"Ocurrio un error",text:"¡El registro no pudo ser borrado!"}):1==a?swal({type:"success",title:"El registro se ha borrado correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&window.location.reload()}).catch(swal.noop):swal(a,"","error")}})})}})}}).catch(swal.noop)}function mostrarUsuario(a){$(".divCalendario").hide();let t=new FormData;t.append("idRegistro",a),$.ajax({url:ruta_server+"controllers/usuarios.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(t){e.innerHTML=t.datos,null!=t.imagen?($("#fotografiaUsuario").attr("src",ruta_server+"views/imagenes-usuarios/mini/"+t.imagen),$("#fotografiaUsuario").attr("alt",ruta_server+"views/imagenes-usuarios/"+t.imagen)):($("#fotografiaUsuario").attr("src",ruta_server+"views/img/user.png"),$("#fotografiaUsuario").attr("alt",ruta_server+"views/img/user.png")),1==t.situacion?o.innerHTML='<form action="'+ruta_server+'usuarios" method="post"> <button type="submit" name="actualizarUsuario" value="'+a+'" class="btn btn-primary">Actualizar</button></form>':o.innerHTML="",$(".activarCalendario").on("click",function(){$(".divCalendario").show()}),$(".desactivarCalendario").on("click",function(){$(".divCalendario").hide()}),actualizarCalendario()}})}function myFunctionPass(a){var e=document.getElementById(a);"password"===e.type?e.type="text":e.type="password"}function actualizarPassUsuario(a){t.innerHTML='<form method="POST" style="margin-top: 2%;" id="cambiarContrasena2"><div class="form-group"><div class="row"><div class="col-md-4"></div><div class="col-md-4"><label for="">Nueva contraseña:</label> <i class="fa fa-lock text-green"></i><input  class="form-control" type="text" id="passNueva2" name="passNueva2" placeholder="Presiona el botón generar" pattern="(?=.*d)(?=.*[a-z])(?=.*[A-Z]).{8,12}" title="8 a 12 caracteres; mínimo 1 mayúscula, 1 minúscula y 1 número" required readonly></div></div></div><br><div class="estilos-centrar"><button type="button" class="btn btn-default" id="generarPassUsuario2">Generar</button> <button type="submit" class="btn btn-primary">Actualizar</button></div></form>';let e=document.getElementById("passNueva2");$("#generarPassUsuario2").click(function(){let a="";a+=generarPasswordMinusculas(),a+=generarPasswordMayusculas(),a+=generarPasswordNumeros(),e.value=a}),$("#cambiarContrasena2").submit(function(t){t.preventDefault();let o=new FormData;o.append("passNueva2",md5(e.value)),o.append("idRegistro2",a),$.ajax({url:ruta_server+"controllers/ajaxUsuarios.php",method:"POST",data:o,cache:!1,contentType:!1,processData:!1,success:function(a){3==a?swal({type:"success",title:"La contraseña se actualizó correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&(location.href="usuariosAdministrar")}).catch(swal.noop):4==a?swal({type:"error",title:"Ocurrio un error",text:"intentelo nuevamente",allowOutsideClick:!1}):0==a?swal({type:"info",title:"Escriba la contraseña",text:"intentelo nuevamente",allowOutsideClick:!1}):1==a&&swal({type:"info",title:"La contraseña no tiene el formato correcto",text:"intentelo nuevamente",allowOutsideClick:!1})}})})}function cargarPuestos(){let a=new FormData,e=$("#sucursalUsuario").val(),t=$("#departamentoUsuario").val();a.append("sucursalDepartamentoPuesto",e),a.append("sucursalDepartamentoPuesto2",t),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){$("#targetPuesto").html(a)}})}function filtrosEquipos(){let a=new FormData;a.append("buscadorUsuariosEquipos",$("#buscadorEquipos").val()),a.append("buscadorSucursalEquipos",$("#cargarAjaxSucursalEquipos").val()),a.append("buscadorSituacionEquipos",$("#cargarAjaxSituacionEquipos").val()),a.append("paginaActual","1"),a.append("registrosPorPagina",$("#paginacionEquiposMostrar").find("ul").attr("registros")),a.append("target",$("#paginacionEquiposMostrar").find("ul").attr("target")),$.ajax({url:ruta_server+"controllers/ajaxEquipos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#mostrarDatosEquipos").html(a.data),$("#paginacionEquiposMostrar2,#paginacionEquiposMostrar").html(a.mostrar),$(".mostrarEquipo").click(function(){mostrarEquipo($(this).parent().parent().attr("id"))}),$(".eliminarEquipo").click(function(){eliminarEquipo($(this).parent().parent().attr("id"))}),$(".botonMaxMin").click(function(){botonMaxMin($(this))}),$(window).resize(function(){actualizarResolucion($(window).width())}),$(".formularioDinamico").click(function(a){switch($(this).parent().parent().attr("target")){case"solicitudes":paginador(a,this);break;case"usuarios":paginador2(a,this);break;case"correos":paginador3(a,this);break;case"equipos":paginador4(a,this);break;case"usuariosPass":paginador5(a,this);break;case"paquetesInternos":paginador6(a,this);break;case"paquetesExternos":paginador7(a,this);break;case"tickets":paginador8(a,this)}})}})}function mostrarEquipo(a){let e=new FormData;e.append("idDatosEquipoComputo",a),$.ajax({url:ruta_server+"controllers/ajaxEquipos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(e){$("#targetDetalleEquiposComputo").html(e.datos),null!=e.imagen?$("#fotografiaUsuarioEquipo").attr("src",ruta_server+"views/imagenes-usuarios/"+e.imagen):$("#fotografiaUsuarioEquipo").attr("src",ruta_server+"views/img/user.png"),$("#targetBotonesEquipoComputo").html('<form action="'+ruta_server+'equipos" method="post"> <button type="submit" name="actualizarEquipo" value="'+a+'" class="btn btn-primary">Actualizar</button></form>')}})}function eliminarEquipo(a){swal({title:"¿Estas seguro de borrar el registro?",text:"Realiza este proceso únicamente si vas a dar de baja el equipo, en caso contario se recomienda reasignarlo o dejarlo en situación de no asignado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Sí, borrar!"}).then(e=>{if(e){let e=new FormData;e.append("idSucursalEliminar",a),$.ajax({url:ruta_server+"controllers/ajaxEquipos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){"success"==a.status?swal({type:"success",title:a.mensaje,text:a.mensaje2,allowOutsideClick:!1}).then(a=>{a&&window.location.reload()}).catch(swal.noop):swal({type:a.status,title:a.mensaje,text:a.mensaje2})}})}}).catch(swal.noop)}function filtrosAdministrarUsuarios(){let a=new FormData;a.append("busqueda",$("#buscadorUsuarios").val()),a.append("cargarSucursalActual",$("#cargarAjaxSucursal").val()),a.append("cargarSituacionActual",$("#cargarAjaxSituacion").val()),a.append("paginaActual","1"),a.append("registrosPorPagina",$("#paginacionUsuariosMostrar").find("ul").attr("registros")),a.append("target",$("#paginacionUsuariosMostrar").find("ul").attr("target")),$.ajax({url:ruta_server+"controllers/ajaxUsuarios.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#mostrarDatosUsuarios").html(a.data),$("#paginacionUsuariosMostrar2,#paginacionUsuariosMostrar").html(a.mostrar),$(".mostrarUsuario").click(function(){mostrarUsuario($(this).parent().parent().attr("id"))}),$(".borrarUsuario").click(function(){eliminarUsuario($(this).parent().parent().attr("id"))}),$(".actualizarPassUsuario").click(function(){actualizarPassUsuario($(this).parent().parent().attr("id"))}),$(".botonMaxMin").click(function(){botonMaxMin($(this))}),$(window).resize(function(){actualizarResolucion($(window).width())}),$(".formularioDinamico").click(function(a){switch($(this).parent().parent().attr("target")){case"solicitudes":paginador(a,this);break;case"usuarios":paginador2(a,this);break;case"correos":paginador3(a,this);break;case"equipos":paginador4(a,this);break;case"usuariosPass":paginador5(a,this);break;case"paquetesInternos":paginador6(a,this);break;case"paquetesExternos":paginador7(a,this);break;case"tickets":paginador8(a,this)}})}})}function cargarVinculacionPuestos(){if(""!==$("#departamentoNuevoPuesto").val()){let a=new FormData;a.append("activarPuestoSucursal",$("#sucursalNuevaPuesto").val()),a.append("activarPuestoDepartamento",$("#departamentoNuevoPuesto").val()),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){$("#targetPuestoPuesto").html(a),$("#listarPuestosVinculados").show()}})}else $("#targetPuestoPuesto").html('<select class="form-control" name="mostrarTodosPuestos" id="mostrarTodosPuestos" readonly><option></option></select>'),$("#misVinculosSucursalDepartamentoPuesto").empty(),$("#listarPuestosVinculados").hide()}function formatear(a){var e=a.target.files[0];if(imageType=/image.*/,e.type.match(imageType)){var t=new FileReader;t.onload=fileOnload2,t.readAsDataURL(e)}}function fileOnload2(a){var e=a.target.result;$("#imgenSalidaTicket").attr("src",e),$("#targetAdjuntar").html('<div class="btn btn-default btn-file"><i class="fa fa-paperclip"></i> Cancelar<input type="file" id="imagenTicketCancelar" name="imagenTicketCancelar" accept="image/*"></div>'),$("#imagenTicketCancelar").click(function(a){a.preventDefault(),$("#targetAdjuntar").html('<div class="btn btn-default btn-file"><i class="fa fa-paperclip"></i> Adjuntar<input type="file" id="imagenTicketNuevo" name="imagenTicketNuevo" accept="image/*"></div><p class="help-block">Max. 1MB</p>'),$("#imgenSalidaTicket").attr("src","views/img/ticket.jpg"),$("#imagenTicketNuevo").change(function(a){formatear(a)})})}function correosAdministrarFiltros(){let a=new FormData;a.append("buscadorCorreos",$("#buscadorUsuariosCorreos").val()),a.append("cargarCorreosActual",$("#cargarAjaxCorreos").val()),a.append("paginaActual","1");let e=$("#paginacionCorreosMostrar");a.append("registrosPorPagina",e.find("ul").attr("registros")),a.append("target",e.find("ul").attr("target")),a.append("apuntar",e.find("ul").attr("apuntar")),$.ajax({url:ruta_server+"controllers/ajaxUsuarios.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#mostrarDatosUsuariosCorreos").html(a.data),$("#paginacionCorreosMostrar2,#paginacionCorreosMostrar").html(a.mostrar),$(".mostrarUsuarioCorreos").click(function(){mostrarUsuarioCorreos($(this).parent().parent().attr("id"))}),$(".detalleUsuarioNutrifitness").click(function(){$(this).parent().siblings(".campoVisto").children("input").prop("checked",!0),Nutricion.detalleUsuario($(this).parent().parent().attr("id"))}),$(".grupoChecked").click(function(){Nutricion.seleccionarRegistros($(this).prop("checked"),$(this).parent().parent().attr("id"))}),$(".formularioDinamico").click(function(a){switch($(this).parent().parent().attr("target")){case"solicitudes":paginador(a,this);break;case"usuarios":paginador2(a,this);break;case"correos":paginador3(a,this);break;case"equipos":paginador4(a,this);break;case"usuariosPass":paginador5(a,this);break;case"paquetesInternos":paginador6(a,this);break;case"paquetesExternos":paginador7(a,this);break;case"tickets":paginador8(a,this)}}),$(".botonMaxMin").click(function(){botonMaxMin($(this))}),$(window).resize(function(){actualizarResolucion($(window).width())})}})}function mostrarUsuarioCorreos(a){let e=new FormData;e.append("detallesModalCorreos",a),$.ajax({url:ruta_server+"controllers/ajaxUsuarios.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#modalInformacionCorreos").html(a.datos),null!=a.imagen?($("#fotografiaUsuarioCorreo").attr("src",ruta_server+"views/imagenes-usuarios/mini/"+a.imagen),$("#fotografiaUsuarioCorreo").attr("alt",ruta_server+"views/imagenes-usuarios/"+a.imagen)):($("#fotografiaUsuarioCorreo").attr("src",ruta_server+"views/img/user.png"),$("#fotografiaUsuarioCorreo").attr("alt",ruta_server+"views/img/user.png"))}})}function formatoHora(a){let e=parseInt(a),t=" AM";e>=12&&(12!=e&&(e-=12),t=" PM");let o=e.toString();return e<10&&(o="0"+o),o+":"+a.substring(3)+t}function actualizarCalendario(){let a=new FormData;a.append("cargarCalendario",!0),a.append("cargarDatosId",$("#actualizarCalendario").attr("name")),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,dataType:"json",beforeSend:function(){$("#calendar").prepend('<div style="text-align:center"><img src="'+ruta_server+'views/img/status.gif"></div>')},success:function(a){let e=[];for(let t=0;t<a.length;t++)if(3!=a[t].autorizacion_jefe&&3!=a[t].autorizacion_rh){let o="",r=a[t].fecha_inicio.split("-"),n=a[t].fecha_fin.split("-"),i="";if(1==a[t].tipo_solicitud)switch(a[t].tipo_permiso){case"1":o="#605CA8",i="Justificante de IMSS",i+=" (De <b>"+formatoHora(a[t].horario_inicio)+"</b> A <b>"+formatoHora(a[t].horario_fin)+"</b>)";break;case"2":o="#605CA8",i="Justificante del médico particular",i+=" (De <b>"+formatoHora(a[t].horario_inicio)+"</b> A <b>"+formatoHora(a[t].horario_fin)+"</b>)";break;case"3":o="#605CA8",i="Día completo";break;case"4":o="#605CA8",i="Medio día",i+=" (De <b>"+formatoHora(a[t].horario_inicio)+"</b> A <b>"+formatoHora(a[t].horario_fin)+"</b>)";break;case"5":o="#605CA8",i="Periodo de ausencia por horas",i+=" (De <b>"+formatoHora(a[t].horario_inicio)+"</b> A <b>"+formatoHora(a[t].horario_fin)+"</b>)";break;case"6":o="#605CA8",i="Salida temprano",i+=" (De <b>"+formatoHora(a[t].horario_inicio)+"</b> A <b>"+formatoHora(a[t].horario_fin)+"</b>)";break;case"7":o="#00A65A",i="Bono bimestral";break;case"8":o="#605CA8",i="Luto";break;case"9":o="#DD4B39",i="Falta injustificada";break;case"10":o="#605CA8",i="Suspensión";break;case"11":o="#605CA8",i="Permiso de paternidad";break;case"12":o="#605CA8",i="Permiso de maternidad"}else 2==a[t].tipo_solicitud?(o="#00C0EF",i="Vacaciones"):3==a[t].tipo_solicitud&&(o="#605CA8",i="Cambio de guardia");let s="",c="",l="";if(a[t].autorizacion_rh<2&&(0==a[t].autorizacion_jefe?c="No vista":1==a[t].autorizacion_jefe?c="Vista":2==a[t].autorizacion_jefe&&(c="Autorizada"),0==a[t].autorizacion_rh?l="No vista":1==a[t].autorizacion_rh?l="Vista":2==a[t].autorizacion_rh&&(l="Autorizada"),s="Autorización Jefe: <b>"+c+"</b><br/>Autorización RH: <b>"+l+"</b>",o="#F39C12"),2==a[t].tipo_solicitud){let c,l,u=new Date(r[0],r[1]-1,r[2]),p=new Date(n[0],n[1]-1,n[2]),d=null!=a[t].cuenta_sabado?a[t].cuenta_sabado:0;for(d>0&&console.log("tenemos sabados: ",d);u<=p;)0!==u.getDay()&&(d>0||6!==u.getDay())&&(6===u.getDay()&&d--,c=u.getDate()<=9?0:"",l=u.getMonth()+1<=9?0:"",e.push({id:a[t].id_permiso,name:s,location:i,startDate:new Date(u.getFullYear(),l+u.getMonth(),c+u.getDate()),endDate:new Date(u.getFullYear(),l+u.getMonth(),c+u.getDate()),color:o})),u.setDate(u.getDate()+1)}else 3==a[t].tipo_solicitud?(e.push({id:a[t].id_permiso,name:s,location:i,startDate:new Date(r[0],r[1]-1,r[2]),endDate:new Date(r[0],r[1]-1,r[2]),color:o}),e.push({id:a[t].id_permiso,name:s,location:i,startDate:new Date(n[0],n[1]-1,n[2]),endDate:new Date(n[0],n[1]-1,n[2]),color:o})):e.push({id:a[t].id_permiso,name:s,location:i,startDate:new Date(r[0],r[1]-1,r[2]),endDate:new Date(n[0],n[1]-1,n[2]),color:o})}$("#calendar").data("calendar").setDataSource(e)}})}function recargar_solicitudes(){let a=new FormData;a.append("actualizarSolicitudes",$("#cargarTotalSolicitudes").attr("name")),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){let e="",t="";a.solicitudes>0?(e=a.solicitudes>1?"Tienes "+a.solicitudes+" nuevas solicitudes sin leer":"Tienes "+a.solicitudes+" nueva solicitud sin leer",t="<a href="+ruta_server+"solicitudes>Mostrar</a>",$("#cargarTotalSolicitudes").addClass("label label-success")):(e="No hay solicitudes nuevas",a.solicitudes="",t="",$("#cargarTotalSolicitudes").removeClass("label label-success")),$("#cargarTotalSolicitudes2").text(e),$("#cargarTotalSolicitudes").text(a.solicitudes),$("#linkPermisos").html(t),a.totalNotificaciones>0?(e=a.totalNotificaciones>1?"Tienes "+a.totalNotificaciones+" notificaciones sin ver":"Tienes "+a.totalNotificaciones+" notificación sin ver",$("#cargarNotificacionesTotal").addClass("label label-warning")):(e="No hay notificaciones nuevas",a.totalNotificaciones="",$("#cargarNotificacionesTotal").removeClass("label label-warning")),$("#cargarNotificacionesTotal2").text(e),$("#cargarNotificacionesTotal").text(a.totalNotificaciones),a.notificacionesSolicitudes>0?(e=a.notificacionesSolicitudes>1?a.notificacionesSolicitudes+" Respuestas a tus solicitudes":a.notificacionesSolicitudes+" Respuesta a tu solicitud",$("#cargarnotificacionesSolicitudes").html('<form id="expandirformularioSolicitudes" action="usuariosPass" method="post"><input type="hidden" name="expandirSolicitudes" value="true"/><a href="#" id="expandirVentanaSolicitudes"><i class="fa fa-file-o text-aqua"></i>'+e+"</a></form>")):$("#cargarnotificacionesSolicitudes").html(""),a.cambioGuardia>0?(e=a.cambioGuardia>1?a.cambioGuardia+" Cambios de guardia":a.cambioGuardia+" Cambio de guardia",$("#cargarCambioGuardia").html('<a href="usuariosPass" class="cambio-guardia"><i class="fa fa-handshake-o text-aqua"></i>'+e+"</a>")):$("#cargarCambioGuardia").html(""),a.paquetes>0?(e=a.paquetes>1?a.paquetes+" Notificaciones paquetería interna":a.paquetes+" Notificación paquetería interna",$("#notificacionPaquete").html('<a href="paqueteriaRevision"><i class="fa fa-truck text-black"></i>'+e+"</a>")):$("#notificacionPaquete").html(""),a.paquetesExternos>0?(e=a.paquetesExternos>1?a.paquetesExternos+" Notificaciones paquetería externa":a.paquetesExternos+" Notificación paquetería externa",$("#notificacionPaqueteExterno").html('<form id="expandirPestanaPaqueteExternoFormulario" action="paqueteriaRevision" method="post"><input type="hidden" name="expandirPestanaExterna" value="true"/><a href="#" id="expandirPestanaPaqueteExterno"><i class="fa fa-truck text-black"></i>'+e+"</a></form>")):$("#notificacionPaqueteExterno").html(""),a.tickets>0?(a.mensajesTickets>0&&(PushMensajes.crearMensaje("Notificaciones Intranet AE!","Tienes una respuesta a tu ticket"),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxTickets.php",dataType:"json",data:{resetearMensajes:!0}}).done(function(a){console.log(a)}).fail(function(a){console.log("Ocurrio un error:",a)})),e=a.tickets>1?a.tickets+" Respuestas a tus tickets":a.tickets+" Respuesta a tu ticket",$("#notificacionTickets").html(' <form id="expandirPestanaTicketFormulario" action="ticketNuevo" method="post"><input type="hidden" name="expandirPestanaHistorial" value="true" /><a href="#" id="expandirPestanaTicketHistorial"><i class="fa fa-ticket text-black"></i>'+e+"</a></form>")):$("#notificacionTickets").html(""),$(".cambio-guardia").click(function(e){e.preventDefault(),$("#ventanaPreguntaCambioGuardia").modal("show"),$("#nombreUsuarioCambioGuardia").html("<br>Tienes una solicitud para cambiar guardia con: <br> <b>"+a.permuta+"</b> <hr>El día: <b>"+a.inicio+"</b> (fecha de guardia del peticionario).<br>Por el día: <b>"+a.fin+'</b> <br><br><p class="callout callout-info">¿Deseas aceptarla? <i class="fa fa-question-circle-o fa-2x"></i></p>'),$("#botonesFormularioCambioGuardia").html('<button type="button" class="btn btn-success aceptarCambiodeGuardia" name="aceptar" value="'+a.idPermiso+'">Sí, aceptar</button> <button type="button" class="btn btn-danger aceptarCambiodeGuardia" name="cancelar" value="'+a.idPermiso+'">No, rechazar</button>'),null!=a.imagen?$("#fotografiaUsuarioPermuta").attr("src",ruta_server+"views/imagenes-usuarios/"+a.imagen):$("#fotografiaUsuarioPermuta").attr("src",ruta_server+"views/img/user.png")}),$(".aceptarCambiodeGuardia").click(function(){formularioGuardia(this)}),$("#expandirVentanaSolicitudes").click(function(){$("#expandirformularioSolicitudes").submit()}),$("#expandirPestanaPaqueteExterno").click(function(){$("#expandirPestanaPaqueteExternoFormulario").submit()}),$("#expandirPestanaTicketHistorial").click(function(){$("#expandirPestanaTicketFormulario").submit()})}})}function formularioGuardia(a){let e=0;if(e="aceptar"==$(a).attr("name")?1:2,e>0){let t=new FormData;t.append("respuestaFormularioCambioGuardia",e),t.append("idSolicitudCambioGuardia",$(a).attr("value")),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){a.error?swal(a.mensaje,a.mensaje2,a.tipo):swal({type:a.tipo,title:a.mensaje,text:a.mensaje2,allowOutsideClick:!1}).then(a=>{a&&(location.href=ruta_server+"usuariosPass")}).catch(swal.noop)}})}}function fileOnload3(a){let e=a.target.result;$("#imgenSalidaPerfil").attr("src",e)}function mostrarPermisoUsuario(a){let e,t=new FormData;t.append("idRegistroPermiso",a),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){if($("#target4").html($(a.datos)),e=a.campoAcualizar,a.status>0){recargar_solicitudes(),$("#"+a.campoAcualizar).find("."+a.icono).html('<i class="fa fa-eye text-green fa-2x"></i>');let e=new FormData;e.append("tipoSolicitudMostrar",4),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#actualizarSolicitudesVistas").text(a)}})}if(null!=a.imagen?($("#fotografiaUsuario").attr("src",ruta_server+"views/imagenes-usuarios/mini/"+a.imagen),$("#fotografiaUsuario").attr("alt",ruta_server+"views/imagenes-usuarios/"+a.imagen)):($("#fotografiaUsuario").attr("src",ruta_server+"views/img/user.png"),$("#fotografiaUsuario").attr("alt",ruta_server+"views/img/user.png")),a.status2){$("#autorizarSolicitud").change(function(){0===parseInt($("#autorizarSolicitud").val())?($("#targetDenegarSolicitud").html('<label>Motivo de negación:</label> <i class="fa fa-check-circle text-green"></i><textarea name="negacionPermiso" class="form-control bloquear-textarea textoMay" rows="8" required></textarea><br>'),$("#ocultarSueldo,#ocultarJustificante,#ocultarReincorporacion,#ocultarMensaje,#ocultarFechaSolicitada,#ocultarFechaFin").html("")):($("#targetDenegarSolicitud").html(""),$("#ocultarSueldo").html('<label for="">Goce de sueldo: </label> <i class="fa fa-check-circle text-green"></i><select class="form-control textoMay" name="autorizarGoceSueldo" required><option value=""></option><option value="1">SÍ</option><option value="0">NO</option></select>'),$("#ocultarJustificante").html('<label for="">Presentó justificante: </label> <i class="fa fa-check-circle text-green"></i><select class="form-control textoMay" name="presentarJustificante" required><option value=""></option><option value="1">SÍ</option><option value="0">NO</option></select>'),$("#ocultarReincorporacion").html('<label for="">Fecha de reincorporación: </label><input  class="form-control" type="date" name="fechaReincorporacion">'),$("#ocultarMensaje").html('<p class="callout callout-success">¿Deseas modificar datos de la solicitud? <i class="fa fa-question-circle-o fa-2x"></i></p>'),$("#ocultarFechaSolicitada").html('<label for="">Fecha solicitada: </label> <input type="date" class="select-style" name="actualizarFechaSolicitada" value="'+a.fechaInicio+'">'),$("#ocultarFechaFin").html('<label for="">Fecha finalización: </label> <input type="date" class="select-style" name="actualizarFechaFin" value="'+a.fechaFin+'">'))});let t=document.getElementById("formularioSolicitudAutorizacion");$("#formularioSolicitudAutorizacion").submit(function(o){o.preventDefault();let r=new FormData(t);r.append("idPermisoAutorizar",a.campoAcualizar),r.append("tipo_permiso",a.tipoSolicitud),r.append("idSolicitante",a.usuarioSolicitante),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:r,cache:!1,contentType:!1,processData:!1,success:function(a){if(0==a)swal({type:"error",title:"Ocurrio un error",text:"¡Intentalo de nuevo!"});else if(1==a){if(1==$("#autorizarSolicitud").val()){$("#"+e).find(".campoRH").html('<i class="fa fa-check-square text-green fa-2x"></i>');let a=new FormData;a.append("tipoSolicitudMostrar",2),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#actualizarSolicitudesAutorizadas").text(a)}})}else{$("#"+e).find(".campoRH").html('<i class="fa fa-window-close text-red fa-2x"></i>');let a=new FormData;a.append("tipoSolicitudMostrar",3),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#actualizarSolicitudesCanceladas").text(a)}})}swal({type:"success",title:"La solicitud se registró correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&$("#mostrarPermisosModal .close").click()}).catch(swal.noop)}else 8==a?swal({type:"warning",title:"No escribas caracteres especiales",text:"Sólo letras, números, paréntesis y espacios"}):swal("Ocurrio un error",a,"error")}})})}else{$("#autorizarSolicitud2").change(function(){0===parseInt($("#autorizarSolicitud2").val())?$("#targetDenegarSolicitud2").html('<label>Motivo de negación:</label> <i class="fa fa-check-circle text-green"></i><textarea name="negacionPermiso2" class="form-control bloquear-textarea textoMay" rows="8" required></textarea><br>'):1===parseInt($("#autorizarSolicitud2").val())?$("#targetDenegarSolicitud2").html('<label>Observaciones:</label><textarea name="observacionesAutorizarPermiso" class="form-control bloquear-textarea textoMay" rows="8" placeholder="Si lo deseas puedes indicarle a Recursos Humanos si este permiso se solicita con o sin goce de sueldo"></textarea><br>'):$("#targetDenegarSolicitud2").html("")});let t=document.getElementById("formularioSolicitudAutorizacionJefe");$("#formularioSolicitudAutorizacionJefe").submit(function(o){o.preventDefault();let r=new FormData(t);r.append("idPermisoAutorizar2",a.campoAcualizar),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:r,cache:!1,contentType:!1,processData:!1,success:function(a){if(0==a)swal({type:"error",title:"Ocurrio un error",text:"¡Intentalo de nuevo!"});else if(1==a){if(1==$("#autorizarSolicitud2").val()){$("#"+e).find(".campoJefe").html('<i class="fa fa-check-square text-green fa-2x"></i>');let a=new FormData;a.append("tipoSolicitudMostrar",2),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#actualizarSolicitudesAutorizadas").text(a)}})}else{$("#"+e).find(".campoJefe").html('<i class="fa fa-window-close text-red fa-2x"></i>');let a=new FormData;a.append("tipoSolicitudMostrar",3),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#actualizarSolicitudesAutorizadas").text(a)}})}swal({type:"success",title:"La solicitud se registró correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&$("#mostrarPermisosModal .close").click()}).catch(swal.noop)}else 8==a?swal({type:"warning",title:"No escribas caracteres especiales",text:"Sólo letras, signos de puntuación, números, paréntesis y espacios"}):swal("Ocurrio un error",a,"error")}})})}let t=ruta_server+"views/pdf/generarPdfSolicitud.php";$(".formatoPdf").click(function(){window.open(t+"?idPermiso="+$(this).attr("id"),"nombre de la ventana")})}})}function detallesPermisoUsuarios(a,e){let t=new FormData;t.append("detallesSolicitudUsuario",a),$("#targetDetallesSolicitud").html('<div style="text-align:center"><img src='+ruta_server+'"views/img/status.gif"></div>'),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#targetDetallesSolicitud").html(a.datos),1==a.icono&&$(e).children().html('<i class="fa fa-eye text-black"></i>'),recargar_solicitudes();let t=ruta_server+"views/pdf/generarPdfSolicitud.php";$(".formatoPdf").click(function(){window.open(t+"?idPermiso="+$(this).attr("id"),"nombre de la ventana")})}})}function borrarPermisoUsuario(a){swal({title:"¿Quieres borrar tu solicitud?",text:"",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí",cancelButtonText:"No"}).then(e=>{$.ajax({type:"POST",url:ruta_server+"controllers/ajaxPermisos.php",dataType:"json",data:{borrarPermisoUsuario:a}}).done(function(a){a.error?swal({type:a.tipo,title:a.mensaje,text:a.mensaje2}):swal({type:a.tipo,title:a.mensaje,text:a.mensaje2,allowOutsideClick:!1}).then(a=>{let e=document.createElement("form");e.setAttribute("method","post"),e.setAttribute("action","usuariosPass"),e.setAttribute("id","expandirformularioSolicitudes");let t=document.createElement("input");t.setAttribute("type","hidden"),t.setAttribute("name","expandirSolicitudes"),t.setAttribute("value","true"),e.appendChild(t),document.getElementsByTagName("body")[0].appendChild(e),$("#expandirformularioSolicitudes").submit()}).catch(swal.noop)}).fail(function(a){console.log("Ocurrio un error:",a)})}).catch(a=>{})}function filtrosSolicitudes(){let a=new FormData;a.append("buscadorPermisos",$("#buscadorUsuariosPermisos").val()),a.append("cargarSituacionSolicitudes",$("#cargarAjaxSituacionSolicitudes").val()),a.append("cargarSucursalSolicitudes",$("#cargarAjaxSucursalSolicitudes").val()),a.append("cargarFechaSolicitudes",$("#fechaOrdenarSolicitudes").val()),a.append("paginaActual","1"),a.append("registrosPorPagina",$("#paginacionSolicitudesMostrar").find("ul").attr("registros")),a.append("tipoUsuario",$("#paginacionSolicitudesMostrar").find("ul").attr("nivel")),a.append("idUsuario",$("#paginacionSolicitudesMostrar").find("ul").attr("idusuario")),a.append("target",$("#paginacionSolicitudesMostrar").find("ul").attr("target")),$("#mostrarDatosUsuariosSolicitudes").html('<div style="text-align:center"><img src="'+ruta_server+'views/img/status.gif"></div>'),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#mostrarDatosUsuariosSolicitudes").html(a.data),$("#paginacionSolicitudesMostrar2,#paginacionSolicitudesMostrar").html(a.mostrar),$(".mostrarPermisoUsuario").click(function(){mostrarPermisoUsuario($(this).parent().parent().attr("id"))}),$(".formularioDinamico").click(function(a){switch($(this).parent().parent().attr("target")){case"solicitudes":paginador(a,this);break;case"usuarios":paginador2(a,this);break;case"correos":paginador3(a,this);break;case"equipos":paginador4(a,this);break;case"usuariosPass":paginador5(a,this);break;case"paquetesInternos":paginador6(a,this);break;case"paquetesExternos":paginador7(a,this);break;case"tickets":paginador8(a,this)}})}})}function paginador(a,e){a.preventDefault();let t=new FormData;t.append("buscadorPermisos",encodeURIComponent($("#buscadorUsuariosPermisos").val())),
t.append("cargarSituacionSolicitudes",$("#cargarAjaxSituacionSolicitudes").val()),t.append("cargarSucursalSolicitudes",$("#cargarAjaxSucursalSolicitudes").val()),t.append("cargarFechaSolicitudes",$("#fechaOrdenarSolicitudes").val()),t.append("paginaActual",$(e).parent().attr("actual")),t.append("registrosPorPagina",$(e).parent().parent().attr("registros")),t.append("tipoUsuario",$(e).parent().parent().attr("nivel")),t.append("idUsuario",$(e).parent().parent().attr("idusuario")),t.append("target",$(e).parent().parent().attr("target")),$("#mostrarDatosUsuariosSolicitudes").html('<div style="text-align:center"><img src="'+ruta_server+'views/img/status.gif"></div>'),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#mostrarDatosUsuariosSolicitudes").html(a.data),$("#paginacionSolicitudesMostrar2,#paginacionSolicitudesMostrar").html(a.mostrar),$(".formularioDinamico").click(function(a){paginador(a,this)}),$(".mostrarPermisoUsuario").click(function(){mostrarPermisoUsuario($(this).parent().parent().attr("id"))}),$(".botonMaxMin").click(function(){botonMaxMin($(this))})}})}function paginador2(a,e){a.preventDefault();let t=new FormData;t.append("busqueda",encodeURIComponent($("#buscadorUsuarios").val())),t.append("cargarSucursalActual",$("#cargarAjaxSucursal").val()),t.append("cargarSituacionActual",$("#cargarAjaxSituacion").val()),t.append("paginaActual",$(e).parent().attr("actual")),t.append("registrosPorPagina",$(e).parent().parent().attr("registros")),t.append("target",$(e).parent().parent().attr("target")),$("#mostrarDatosUsuarios").html('<div style="text-align:center"><img src="'+ruta_server+'views/img/status.gif"></div>'),$.ajax({url:ruta_server+"controllers/ajaxUsuarios.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#mostrarDatosUsuarios").html(a.data),$("#paginacionUsuariosMostrar2,#paginacionUsuariosMostrar").html(a.mostrar),$(".mostrarUsuario").click(function(){mostrarUsuario($(this).parent().parent().attr("id"))}),$(".borrarUsuario").click(function(){eliminarUsuario($(this).parent().parent().attr("id"))}),$(".actualizarPassUsuario").click(function(){actualizarPassUsuario($(this).parent().parent().attr("id"))}),$(".botonMaxMin").click(function(){botonMaxMin($(this))}),$(window).resize(function(){actualizarResolucion($(window).width())}),$(".formularioDinamico").click(function(a){paginador2(a,this)})}})}function paginador3(a,e){a.preventDefault();let t=new FormData;t.append("buscadorCorreos",encodeURIComponent($("#buscadorUsuariosCorreos").val())),t.append("cargarCorreosActual",$("#cargarAjaxCorreos").val());let o=$(e);t.append("paginaActual",o.parent().attr("actual")),t.append("registrosPorPagina",o.parent().parent().attr("registros")),t.append("target",o.parent().parent().attr("target")),t.append("apuntar",o.parent().parent().attr("apuntar")),$("#mostrarDatosUsuariosCorreos").html('<div style="text-align:center"><img src="'+ruta_server+'views/img/status.gif"></div>'),$.ajax({url:ruta_server+"controllers/ajaxUsuarios.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#mostrarDatosUsuariosCorreos").html(a.data),$("#paginacionCorreosMostrar2,#paginacionCorreosMostrar").html(a.mostrar),$(".formularioDinamico").click(function(a){paginador3(a,this)}),$(".mostrarUsuarioCorreos").click(function(){mostrarUsuarioCorreos($(this).parent().parent().attr("id"))}),$(".detalleUsuarioNutrifitness").click(function(){$(this).parent().siblings(".campoVisto").children("input").prop("checked",!0),Nutricion.detalleUsuario($(this).parent().parent().attr("id"))}),$(".grupoChecked").click(function(){Nutricion.seleccionarRegistros($(this).prop("checked"),$(this).parent().parent().attr("id"))})}})}function paginador4(a,e){a.preventDefault();let t=new FormData;t.append("buscadorUsuariosEquipos",encodeURIComponent($("#buscadorEquipos").val())),t.append("buscadorSucursalEquipos",$("#cargarAjaxSucursalEquipos").val()),t.append("buscadorSituacionEquipos",$("#cargarAjaxSituacionEquipos").val()),t.append("paginaActual",$(e).parent().attr("actual")),t.append("registrosPorPagina",$(e).parent().parent().attr("registros")),t.append("target",$(e).parent().parent().attr("target")),$("#mostrarDatosEquipos").html('<div style="text-align:center"><img src="'+ruta_server+'views/img/status.gif"></div>'),$.ajax({url:ruta_server+"controllers/ajaxEquipos.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#mostrarDatosEquipos").html(a.data),$("#paginacionEquiposMostrar2,#paginacionEquiposMostrar").html(a.mostrar),$(".botonMaxMin").click(function(){botonMaxMin($(this))}),$(window).resize(function(){actualizarResolucion($(window).width())}),$(".mostrarEquipo").click(function(){mostrarEquipo($(this).parent().parent().attr("id"))}),$(".eliminarEquipo").click(function(){eliminarEquipo($(this).parent().parent().attr("id"))}),$(".formularioDinamico").click(function(a){paginador4(a,this)})}})}function paginador5(a,e){a.preventDefault();let t=new FormData;t.append("banderaPaginadorUsuarioStandar",!0),t.append("paginaActual",$(e).parent().attr("actual")),t.append("registrosPorPagina",$(e).parent().parent().attr("registros")),t.append("target",$(e).parent().parent().attr("target")),$("#mostrarDatosSolicitante").html('<div style="text-align:center"><img src="'+ruta_server+'views/img/status.gif"></div>'),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#mostrarDatosSolicitante").html(a.data),$("#paginacionPermisosSolicitante2,#paginacionPermisosSolicitante").html(a.mostrar),$(".borrarPermisoUsuario").click(function(){borrarPermisoUsuario($(this).parent().parent().parent().parent().attr("id"))}),$(".botonMaxMin").click(function(){botonMaxMin($(this))}),$(".detallesSolicitudUsuario").click(function(){detallesPermisoUsuarios($(this).parent().parent().attr("id")),recargar_solicitudes()}),$(".formularioDinamico").click(function(a){paginador5(a,this)})}})}function paginador6(a,e){a.preventDefault();let t=new FormData;t.append("fechaPaqueteInterno",$("#fechaPaquetesInternos").val()),t.append("situacionPaqueteInterno",$("#situacionPaquetesInternos").val()),t.append("paginaActual",$(e).parent().attr("actual")),t.append("registrosPorPagina",$(e).parent().parent().attr("registros")),t.append("target",$(e).parent().parent().attr("target")),$("#mostrarDatosPaquetesInternos").html('<div style="text-align:center"><img src="'+ruta_server+'views/img/status.gif"></div>'),$.ajax({url:ruta_server+"controllers/AjaxPaqueteria.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#mostrarDatosPaquetesInternos").html(a.data),$("#paginacionPaquetesInternos,#paginacionPaquetesInternos2").html(a.mostrar),$(".formularioDinamico").click(function(a){paginador6(a,this)}),$(".mostrarDetallesPaqueteInterno").click(function(){f.detallesPaqueteInterno($(this).parent().parent().attr("id"))}),$(".botonMaxMin").click(function(){botonMaxMin($(this))})}})}function paginador7(a,e){a.preventDefault();let t=new FormData;t.append("fechaPaqueteExterno",$("#fechaPaquetesExternos").val()),t.append("situacionPaqueteExterno",$("#situacionPaquetesExternos").val()),t.append("paginaActual",$(e).parent().attr("actual")),t.append("registrosPorPagina",$(e).parent().parent().attr("registros")),t.append("target",$(e).parent().parent().attr("target")),$("#mostrarDatosPaquetesExternos").html('<div style="text-align:center"><img src="'+ruta_server+'views/img/status.gif"></div>'),$.ajax({url:ruta_server+"controllers/AjaxPaqueteria.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#mostrarDatosPaquetesExternos").html(a.data),$("#paginacionPaquetesExternos,#paginacionPaquetesExternos2").html(a.mostrar),$(".formularioDinamico").click(function(a){paginador7(a,this)}),$(".mostrarDetallesPaqueteExterno").click(function(){f.detallesPaqueteExterno($(this).parent().parent().attr("id"))}),$(".botonMaxMin2").click(function(){botonMaxMin($(this))})}})}function paginador8(a,e){a.preventDefault();let t=new FormData;t.append("fechaTicketCerrado",$("#fechasTickets").val()),t.append("nombrePersonaRegistroTicket",$("#buscadorUsuariosTickets").val()),t.append("paginaActual",$(e).parent().attr("actual")),t.append("registrosPorPagina",$(e).parent().parent().attr("registros")),t.append("target",$(e).parent().parent().attr("target")),$("#mostrarHistorialTickets").html('<div style="text-align:center"><img src="'+ruta_server+'views/img/status.gif"></div>'),$.ajax({url:ruta_server+"controllers/AjaxTickets.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#mostrarHistorialTickets").html(a.data),$("#paginacionTickets,#paginacionTickets2").html(a.mostrar),$(".formularioDinamico").click(function(a){paginador8(a,this)}),$(".mostrarDatosTicketFinalizados").click(function(){Tickets.mostrarDatosTicket($(this).parent().parent().attr("id"))}),$(".mostrarDatosHistorialTickets").click(function(){Tickets.historialTicket($(this).attr("value"))})}})}function botonMaxMin(a){"views/img/circle-max.png"==a.attr("src")?(a.parent().parent().siblings(".divContenedorHijo").show(),a.attr("src","views/img/circle-min.png")):(a.parent().parent().siblings(".divContenedorHijo").hide(),a.attr("src","views/img/circle-max.png"))}function actualizarResolucion(a){a>=1201&&$(".divContenedorHijo").is(":hidden")?($(".divContenedorHijo").show(),$(".botonMaxMin").attr("src","views/img/circle-max.png"),$(".divContenedorHijo").css({display:"flex","flex-wrap":"wrap","flex-direction":"row","justify-content":"center","align-items":"center"}),$(".campoTelefono,.campoDireccion").css("justify-content","flex-start")):a<1201&&$(".divContenedorHijo").is(":visible")&&($(".divContenedorHijo").hide(),$(".botonMaxMin").attr("src","views/img/circle-max.png"))}function buscarReciboCFDI(){let a=$("#anoFiscal").val(),e=$("#periodoNomina").val(),t=$("#tipoRecibo").val(),o=$("#formatoNomina").val(),r="SYS/S033 ";if(1==t){r="ASIM/S033 ";let a=$("#anoFiscal option:selected").text();e="2019"==a&&e<6?"202"+e:"90"+e}$("#nombreArchivoDescargar").prop("disabled",!0),$("#nombreArchivoDescargar").removeClass("btn-info"),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxRutasDescargas.php",dataType:"json",data:{completarRuta:a,periodo:e,tipo:t,formato:o}}).done(function(t){if(t.existe){if(console.log(t),t.orden){let n="/RP ";""===t.registro&&(n="/RP"),$("#nombreArchivoDescargar").attr("value",a+r+e+n+t.registro+"/Depto "+t.departamento+"/NOM S033 "+e+" - "+t.clave+"_"+t.retimbrado),$("#formatoArchivoNomina").attr("value",o)}else $("#nombreArchivoDescargar").attr("value",a+r+e+"/NOM S033 "+e+" - "+t.clave+"_"+t.retimbrado),$("#formatoArchivoNomina").attr("value",o);$("#nombreArchivoDescargar").prop("disabled",!1),$("#nombreArchivoDescargar").addClass("btn-info")}else swal({type:"error",title:"No se encontró el archivo",text:"Comunicate con el área de desarrollo de software"}),console.log(t)}).fail(function(a){console.log("Ocurrio un error:",a)})}let a=document.getElementById("formularioNuevoUsuario");$("#formularioNuevoUsuario").submit(function(e){e.preventDefault(),swal({title:'<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i>',text:" Por favor espere...",type:"",showConfirmButton:!1,allowOutsideClick:!1});let t=new FormData(a);$.ajax({url:ruta_server+"controllers/ajaxUsuarios.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,success:function(e){1==e?swal("Verifica que el nombre del empleado sólo tenga letras y espacios","","warning"):2==e?swal("Verifica que el apellido paterno del empleado sólo tenga letras y espacios","","warning"):3==e?swal("Verifica que el apellido materno del empleado sólo tenga letras y espacios","","warning"):4==e?swal("Selecciona una sucursal","","warning"):5==e?swal("Selecciona un departamento","","warning"):6==e?swal("Selecciona un puesto","","warning"):7==e?swal("Captura la fecha de ingreso","","warning"):8==e?swal("Verifica que el formato del CURP sea correcto","","warning"):9==e?swal("Verifica que el formato del RFC sea correcto","","warning"):10==e?swal("Verifica que el formato del NSS sea correcto","","warning"):11==e?swal("Selecciona el Estado de nacimiento","","warning"):12==e?swal("Selecciona el Municipio de nacimiento","","warning"):13==e?swal("Captura la fecha de nacimiento","","warning"):14==e?swal("Selecciona el estado civil","","warning"):15==e?swal("Selecciona el nivel de estudios","","warning"):16==e?swal("Captura el domicilio","","warning"):17==e?swal("Captura el código postal","","warning"):18==e?swal("Selecciona el municipio donde se encuentra ubicado el domicilio","","warning"):19==e?swal("Selecciona la colonia donde se encuentra ubicado el domicilio","","warning"):20==e?swal("Selecciona sí cuenta  o no con credito Infonavit","","warning"):21==e?swal("Selecciona sí cuenta  o no con credito Fonacot","","warning"):22==e?swal("Captura correctamente el telefono móvil a 10 digitos","","warning"):23==e?swal("Captura correctamente el telefono fijo a 10 digitos","","warning"):24==e?swal("captura el nombre del usuario","","warning"):25==e?swal("Captura el correo electrónico del usuario","","warning"):26==e?swal("Genera una contraseña para el usuario","","warning"):27==e?swal("Selecciona los permisos que el usuario tendra para acceder","","warning"):28==e?swal("Verifica que el nombre del contacto sólo tenga letras y espacios","","warning"):29==e?swal("Verifica que el parentesco del contacto sólo tenga letras y espacios","","warning"):30==e?swal("Captura correctamente el telefono móvil del contacto a 10 digitos","","warning"):31==e?swal("Captura correctamente el telefono fijo del contacto a 10 digitos","","warning"):32==e?swal("Debes completar la información del contacto de emergencia","","warning"):33==e?swal("Captura el nombre del contacto de emergencia","","warning"):34==e?swal("Captura el parentesco entre el empleado y el contacto de emergencia","","warning"):35==e?swal("Captura al menos un teléfono de contacto","","warning"):36==e?swal("El archivo debe ser una imagen en formato .jpg, .jpeg o .png","","warning"):40==e?swal("Debes seleccionar el genero","","warning"):41==e?swal("Debes seleccionar el número de hijos","","warning"):42==e?swal("Debes seleccionar el tipo de sangre","","warning"):43==e?swal("Captura los tipos de alergias, en caso de NO tener ninguna especificalo.","","warning"):37==e?swal({type:"success",title:"El registro se realizo correctamente",text:"",allowOutsideClick:!1}).then(e=>{e&&(a.reset(),$("#imgenSalida").attr("src",ruta_server+"views/img/user.png"),location.href=ruta_server+"usuarios")}).catch(swal.noop):38==e?swal("Ocurrio un erro, intentelo nuevamente","","error"):39==e?swal({type:"success",title:"El registro se actualizo correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&(location.href=ruta_server+"usuariosAdministrar")}).catch(swal.noop):swal(e,"","error")}})}),$("#formularioCancelarUsuario").click(function(){a.reset(),$("#imgenSalida").attr("src",ruta_server+"views/img/user.png")}),$("#imagenNuevoUsuario").change(function(a){let e=a.target.files[0],t=/\.(?=jpg|png|jpeg)/gi.test(e.name);if(!t)return swal("Sólo se permiten imagenes","Formato: .jpg, .jpeg y .png","error").catch(swal.noop),$("#imagenNuevoUsuario").val(""),void $("#imgenSalida").attr("src",$("#imgenSalida").attr("alt"));let o=2;if(e.size>1024*o*1024)return swal("La imagen tiene un tamaño mayor al permitido","El peso máximo es de 2 MB","error").catch(swal.noop),$("#imagenNuevoUsuario").val(""),void $("#imgenSalida").attr("src",$("#imgenSalida").attr("alt"));let r=new FileReader;r.onload=fileOnload,r.readAsDataURL(e)});let e=document.getElementById("target"),t=document.getElementById("target2"),o=document.getElementById("targetBotones");$(".mostrarUsuario").click(function(){mostrarUsuario($(this).parent().parent().attr("id"))}),$(".borrarUsuario").click(function(){eliminarUsuario($(this).parent().parent().attr("id"))}),$(".actualizarPassUsuario").click(function(){actualizarPassUsuario($(this).parent().parent().attr("id"))});let r=document.getElementById("cambiarContrasena");$("#formularioPassCancelarUsuario").click(function(){r.reset(),$("#passActual").attr("type","password"),$("#passNueva").attr("type","password"),$("#passConfirmacion").attr("type","password")}),$("#cambiarContrasena").submit(function(a){a.preventDefault();let e=new FormData;e.append("passActual",md5($("#passActual").val())),e.append("passNueva",md5($("#passNueva").val())),e.append("passConfirmacion",md5($("#passConfirmacion").val())),$.ajax({url:ruta_server+"controllers/ajaxUsuarios.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:function(a){0==a?swal("Verifica que los campos sólo tenga números y letras","","warning"):1==a?swal("La nueva contraseña no coincide con la confirmación","","warning"):2==a?swal("La contraseña actual no coincide","","warning"):3==a?(swal("La contraseña se actualizó correctamente","","success"),r.reset(),$("#passActual").attr("type","password"),$("#passNueva").attr("type","password"),$("#passConfirmacion").attr("type","password")):4==a?swal("Ocurrio un erro, intentelo nuevamente","","error"):5==a&&swal("La contraseña no tiene el formato requerido","","warning")}})}),$("#limpiarPass").click(function(){$("#passNueva2").val("")}),$("#campoCurp").keyup(function(){$("#curpRestante").text("("+(18-$("#campoCurp").val().length)+" caracteres restantes)")}),$("#seguroSocial").keyup(function(){$("#nssRestante").text("("+(11-$("#seguroSocial").val().length)+" dÍgitos restantes)")}),$("#campoRfc").keyup(function(){$("#rfcRestante").text("("+(13-$("#campoRfc").val().length)+" caracteres restantes)")}),$("#lugarNacimiento").change(function(){let a=new FormData,e=$("#lugarNacimiento").val();a.append("nombreEstado",e),$.ajax({url:ruta_server+"controllers/ajaxEstados.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){$("#target2").html(a)}})}),$("#sucursalUsuario").change(function(){if(""!==$("#sucursalUsuario").val()){$("#puestoUsuario").val(""),$("#puestoUsuario").attr("readonly","readonly");let a=new FormData,e=$("#sucursalUsuario").val();a.append("sucursalDepartamento",e),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){$("#targetDepartamento").html(a),$("#departamentoUsuario").change(function(){cargarPuestos()})}})}else $("#targetDepartamento").html('<select class="form-control"  name="departamentoUsuario" id="departamentoUsuario" readonly required></select>'),$("#targetPuesto").html('<select class="form-control" name="puestoUsuario" id="puestoUsuario" readonly required></select>')}),$("#departamentoUsuario").change(function(){cargarPuestos()}),$("#codigoPostal").blur(function(){if(""!==$("#codigoPostal").val()){let a="http://"+window.location.host+"/api-codigos-postales-v1/index.php/Codigo/codigo/"+$("#codigoPostal").val();fetch(a).then(a=>a.json()).then(a=>{$("#recargarColonia").html('<select class="form-control textoMay" id="colonia" name="colonia" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ0-9\\s.]{2,}" readonly required><option></option></select>'),$("#municipio").val(a.municipio);let e=a.colonias;e.sort();let t=document.getElementById("colonia");for(value in e){let a=document.createElement("option");a.text=e[value],t.add(a)}$("#colonia").removeAttr("readonly")}).catch(function(a){console.log(JSON.stringify(a))})}else $("#recargarColonia").html('<select class="form-control textoMay" id="colonia" name="colonia" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ0-9\\s.]{2,}" readonly required><option></option></select>'),$("#municipio").val("")}),$("#nickUsuarioAgregar").keyup(function(){""!==$("#nickUsuarioAgregar").val()?$("#correoUsuario").val($("#nickUsuarioAgregar").val()+"@asesoresempresariales.com.mx"):$("#correoUsuario").val("")}),$(".celular").mask("00-00-00-00-00"),$(".codigoPostal").mask("00000"),$(".curp").mask("LVLLDDDDDDSLLLLLDD",{translation:{L:{pattern:/[a-zA-Z]/,optional:!1},V:{pattern:/[AEIOUXaeioux]/,optional:!1},D:{pattern:/[0-9]/,optional:!1},S:{pattern:/[MHmh]/,optional:!1}}}),$(".rfc").mask("LLLLDDDDDDCCC",{translation:{L:{pattern:/[a-zA-Z]/,optional:!1},C:{pattern:/[a-zA-Z0-9]/,optional:!1},D:{pattern:/[0-9]/,optional:!1}}}),$(".nss").mask("00000000000"),$("#passwordIngreso").focus(function(){$(".verPass").css("display","inline")}),$("#passwordIngreso").blur(function(){$(".verPass").css("display","none")}),$(".verPass").hover(function(){myFunctionPass("passwordIngreso")}),$(".cb-value").click(function(){var a=$(this).parent(".toggle-btn");$(a).find("input.cb-value").is(":checked")?($(a).removeClass("active"),$(this).attr("checked",!1)):($(a).addClass("active"),$(this).attr("checked",!0))}),$(".marcaRegistrada").on("change",function(){if(0==$(this).val())$("#targetMarcaEquipo").html('<input class="form-control" type="text" id="marcaEquipo" name="marcaEquipo" placeholder="Ej. Lenovo" title="Escribe la marca del equipo de cómputo" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ0-9-.\\s]{2,}" required autocomplete="off">');else if(1==$(this).val()){let a=new FormData,e="activar";a.append("marcaEquipo",e),$.ajax({url:ruta_server+"controllers/ajaxEquipos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){$("#targetMarcaEquipo").html(a)}})}}),$(".modeloRegistrado").on("change",function(){if(0==$(this).val())$("#targetModeloEquipo").html('<input  class="form-control" type="text" id="modeloEquipo" name="modeloEquipo" placeholder="Ej. ProOne 400 G1 Aio" title="Escribe el modelo del equipo de cómputo" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ0-9-_.\\s]{2,}" required autocomplete="off">');else if(1==$(this).val()){let a=new FormData,e="activar";a.append("modeloEquipo",e),$.ajax({url:ruta_server+"controllers/ajaxEquipos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){$("#targetModeloEquipo").html(a)}})}}),$("#equipoSucursalUsuario").on("change",function(){let a=$(this).val();if(0==a)$("#targetEquipoUsuarioCargo").html('<select class="form-control textoMay" name="equipoUsuarioCargo" id="equipoUsuarioCargo" requerid readonly><option value="0"></option></select>');else{let e=new FormData;e.append("asignarEquipoAUsuario",a),$.ajax({url:ruta_server+"controllers/ajaxEquipos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:function(a){$("#targetEquipoUsuarioCargo").html(a)}})}});let n=document.getElementById("formularioEquposComputo");$("#formularioEquposComputo").submit(function(a){a.preventDefault();let e=new FormData(n);$.ajax({url:ruta_server+"controllers/ajaxEquipos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){"success"==a.status?swal({type:a.status,title:a.mensaje,text:a.mensaje2,allowOutsideClick:!1}).then(a=>{a&&(location.href=ruta_server+"equipos")}).catch(swal.noop):swal(a.mensaje,a.mensaje2,a.status)}})}),$("#formularioCancelarEquipo").click(function(){n.reset(),$("#targetMarcaEquipo").html('<input class="form-control" type="text" id="marcaEquipo" name="marcaEquipo" placeholder="Ej. Lenovo" title="Escribe la marca del equipo de cómputo" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ0-9-.\\s]{2,}" required>'),$("#targetModeloEquipo").html('<input  class="form-control" type="text" id="" name="modeloEquipo" placeholder="Ej. ProOne 400 G1 Aio" title="Escribe el modelo del equipo de cómputo" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ0-9-_.\\s]{2,}" required>'),$("#targetEquipoUsuarioCargo").html('<select class="form-control textoMay" name="equipoUsuarioCargo" id="equipoUsuarioCargo" requerid readonly><option value="0"></option></select>'),$("#mouseEquipo,#monitorEquipo,#mochilaEquipo,#equipoUps").parent().addClass("active")}),$("#buscadorEquipos").on("input",function(){filtrosEquipos()}),$("#cargarAjaxSucursalEquipos").change(function(){filtrosEquipos()}),$("#cargarAjaxSituacionEquipos").change(function(){filtrosEquipos(),2==$(this).val()?($("#cargarAjaxSucursalEquipos,#buscadorEquipos").prop("disabled",!0),$("#cargarAjaxSucursalEquipos").css("background","rgba(0,0,0,0.1)")):($("#cargarAjaxSucursalEquipos,#buscadorEquipos").prop("disabled",!1),$("#cargarAjaxSucursalEquipos").css("background",""))}),$(".mostrarEquipo").click(function(){mostrarEquipo($(this).parent().parent().attr("id"))}),$(".eliminarEquipo").click(function(){eliminarEquipo($(this).parent().parent().attr("id"))});let i=document.getElementById("formularioNuevoSucursal");$("#formularioNuevoSucursal").submit(function(a){let e="";a.preventDefault();let t=new FormData(i);$("#mylist").each(function(a){e=$(this).text()}),t.append("telefonos",e),$.ajax({url:ruta_server+"controllers/ajaxSucursales.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,success:function(a){0==a?swal({type:"success",title:"El registro se realizo correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&(i.reset(),$("#recargarColoniaSucursal").html('<select class="form-control textoMay" id="coloniaSucursal" name="coloniaSucursal" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ0-9\\s.]{2,}" readonly required><option></option></select>'),$("#mylist").empty())}).catch(swal.noop):1==a?swal("Ocurrio un erro, intentelo nuevamente","","error"):2==a?swal({type:"success",title:"El registro se actualizo correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&(location.href="sucursalesAdministrar")}).catch(swal.noop):3==a?swal("El número de teléfono no tiene el formato correcto","","warning"):4==a?swal("Escribe un nombre. Sólo letras, números, espacios y guiones","","warning"):5==a?swal("Escribe una calle. Sólo letras, números, espacios y guiones","","warning"):6==a?swal("Escribe el número exterior. Sólo letras, números, espacios y guiones","","warning"):7==a?swal("Escribe el número interior. Sólo letras, números, espacios y guiones","","warning"):8==a?swal("Escribe el código postal. Debe contener 5 digitos","","warning"):9==a?swal("Selecciona una colonia. Sólo letras, números y espacios","","warning"):10==a?swal("Escribe un municipio. Sólo letras y espacios","","warning"):11==a?swal("Escribe un estado. Sólo letras y espacios","","warning"):swal(a,"","warning")}})}),$("#anadirTelefono").click(function(a){a.preventDefault();var e=$("#telefonoSucursal").val();if(""!==e&&14==e.length){var t=$("<li></li>").text("01 "+e);$(t).append("<button class='rem'>X</button>"),$("#mylist").append(t),$("#telefonoSucursal").val(""),$(".rem").on("click",function(){$(this).parent().remove()})}}),$(".rem").on("click",function(a){a.preventDefault(),$(this).parent().remove()}),$("#cancelarSucursal").click(function(){$("#mylist").empty(),$("#recargarColoniaSucursal").html('<select class="form-control textoMay" id="coloniaSucursal" name="coloniaSucursal" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ0-9\\s.]{2,}" readonly required><option></option></select>')}),$("#codigoSucursal").blur(function(){let a=$("#codigoSucursal").val();if(""!==a&&5==a.length){let a="http://"+window.location.host+"/api-codigos-postales-v1/index.php/Codigo/codigo/"+$("#codigoSucursal").val();fetch(a).then(a=>a.json()).then(a=>{$("#recargarColoniaSucursal").html('<select class="form-control textoMay" id="coloniaSucursal" name="coloniaSucursal" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ0-9\\s.]{2,}" readonly required><option></option></select>'),$("#municipioSucursal").val(a.municipio),$("#estadoSucursal").val(a.estado);let e=a.colonias;e.sort();let t=document.getElementById("coloniaSucursal");for(value in e){let a=document.createElement("option");a.text=e[value],t.add(a)}$("#coloniaSucursal").removeAttr("readonly")}).catch(function(a){console.log(JSON.stringify(a))})}else $("#recargarColoniaSucursal").html('<select class="form-control textoMay" id="coloniaSucursal" name="coloniaSucursal" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ0-9\\s.]{2,}" readonly required><option></option></select>'),$("#municipioSucursal").val(""),$("#estadoSucursal").val("")}),$(".borrarSucursal").click(function(a){let e=$(this).parent().parent().attr("id");swal({title:"¿Estas seguro de borrar el registro?",text:"Si borra una sucursal la cual tenga empleados relacionados, deberá reasignar a otra sucursal a los empleados",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Sí, borrar!"}).then(a=>{if(a){let a=new FormData;a.append("idSucursalEliminar",e),$.ajax({url:ruta_server+"controllers/ajaxSucursales.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){0==a?swal({type:"error",title:"Ocurrio un error",text:"¡El registro no pudo ser borrado!"}):1==a&&swal({type:"success",title:"El registro se ha borrado correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&window.location.reload()}).catch(swal.noop)}})}}).catch(swal.noop)}),$(".telefonoFijo").mask("(00) 0000-0000"),$(".telefonoFijo").keyup(function(){$(this).val().length>2&&("33"==$(this).val().substring(1,3)||"55"==$(this).val().substring(1,3)||"81"==$(this).val().substring(1,3)?$(".telefonoFijo").mask("(00) 0000-0000"):$(".telefonoFijo").mask("(000) 000-0000"))}),$("#cargarAjaxSucursal,#cargarAjaxSituacion").change(function(){filtrosAdministrarUsuarios()}),$("#buscadorUsuarios").on("input",function(){filtrosAdministrarUsuarios()});let s=document.getElementById("formularioNuevoDepartamento");$("#formularioNuevoDepartamento").submit(function(a){let e="";a.preventDefault();let t=new FormData(s);$("#misDepartamentos li").each(function(a){e+=$(this).text()+","}),t.append("arregloSucursales",e),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,success:function(a){0==a?(s.reset(),$("#misDepartamentos").empty(),swal({type:"success",title:"El registro se realizo correctamente",text:"Paso 1 de 2, ahora deberas vincular el o los DEPARTAMENTOS nuevos a una o a diversas SUCURSALES",allowOutsideClick:!1}).then(a=>{a&&(location.href="vincularDepartamento")}).catch(swal.noop)):1==a?swal({type:"error",title:"Ocurrio un error, intentalo nuevamente",text:"Asegurate que no exista un departamento con el mismo nombre",allowOutsideClick:!1}):2==a?swal({type:"success",title:"El registro se actualizo correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&(location.href="departamento")}).catch(swal.noop):3==a?swal("Selecciona una sucursal","","warning"):4==a?swal("Verifica que el campo Departamento no contenga caracteres especiales, sólo letras, números y espacios","","warning"):swal(a,"","warning")}})}),$("#anadirDepartamento").click(function(a){a.preventDefault();var e=$("#departamentoNuevoDepartamento").val().toUpperCase();if(""!==e){let a=!1;if($("#misDepartamentos li").each(function(){$(this).text()==e&&(a=!0)}),!a){var t=$("<li></li>").text(e);$(t).append("<button class='rem'><i class='fa fa-times'></i></button>"),$("#misDepartamentos").append(t),$(".rem").on("click",function(){$(this).parent().remove()})}$("#departamentoNuevoDepartamento").val("")}}),$("#formularioCancelarDepartamento").click(function(){$("#misDepartamentos").empty()}),$("#listarPuestos").click(function(a){a.preventDefault();let e=new FormData;e.append("listaTotalidadDePuestos",!0),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:function(a){$("#targetTotalidadPuestos").html(a)}})});let c=document.getElementById("formularioNuevoPuesto");$("#formularioNuevoPuesto").submit(function(a){let e="";a.preventDefault();let t=new FormData(c);$("#misPuestos li").each(function(a){e+=$(this).text()+","}),t.append("arregloPuestos",e),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,success:function(a){0==a?(c.reset(),$("#misPuestos").empty(),swal({type:"success",title:"El registro se realizo correctamente",text:"Paso 1 de 2, ahora deberas vincular el o los PUESTOS nuevos a uno o a diversos DEPARTAMENTOS.",
allowOutsideClick:!1}).then(a=>{a&&(location.href="vincularPuesto")}).catch(swal.noop)):1==a?swal({type:"error",title:"Ocurrio un error, intentalo nuevamente",text:"Asegurate que no exista un puesto con el mismo nombre",allowOutsideClick:!1}):2==a?swal({type:"success",title:"El registro se actualizo correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&(location.href="puesto")}).catch(swal.noop):3==a?swal("Verifica que el campo Puesto no contenga caracteres especiales, sólo letras, números y espacios","","warning"):swal(a,"","warning")}})}),$("#anadirPuesto").click(function(a){a.preventDefault();var e=$("#nombreNuevoPuesto").val().toUpperCase();if(""!==e){let a=!1;if($("#misPuestos li").each(function(){$(this).text()==e&&(a=!0)}),!a){var t=$("<li></li>").text(e);$(t).append("<button class='rem'><i class='fa fa-times'></i></button>"),$("#misPuestos").append(t),$(".rem").on("click",function(){$(this).parent().remove()})}$("#nombreNuevoPuesto").val("")}}),$("#formularioCancelarPuesto").click(function(){$("#misPuestos").empty()}),$("#listarDepartamentos").click(function(a){a.preventDefault();let e=new FormData;e.append("listaTotalidadDeDepartamentos",!0),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:function(a){$("#targetTotalidadDepartamentos").html(a)}})});let l=document.getElementById("formularioVinculacionSucursalDepartamento");$("#formularioVinculacionSucursalDepartamento").submit(function(a){let e="";a.preventDefault();let t=new FormData(l);$("#misVinculosSucursalDepartamento li").each(function(){e+=$(this).attr("id"),e+=","}),t.append("arregloVinculacionSucursalDepartamento",e),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,success:function(a){0==a?swal({type:"success",title:"El registro se realizo correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&(l.reset(),$("#misVinculosSucursalDepartamento").empty(),$("#targetVincularDepartamento").html('<select class="form-control textoMay" name="departamentoVincularDepartamento" id="departamentoVincularDepartamento" readonly><option></option></select>'),$("#listarDepartamentosVinculados").hide())}).catch(swal.noop):1==a?swal({type:"error",title:"Ocurrio un error, intentalo nuevamente",text:"Asegurate que no exista previamente una vinculación entre la sucursal y el departamento seleccionado",allowOutsideClick:!1}):2==a?swal({type:"success",title:"El registro se actualizo correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&(location.href="puesto")}).catch(swal.noop):3==a?swal("Verifica que al menos un departamento este añadido","","warning"):swal(a,"","warning")}})}),$("#listarDepartamentosVinculados").hide(),$("#departamentoVincularSucursal").change(function(){let a=$("#departamentoVincularSucursal").val();if(""!==a){let e=new FormData;e.append("activarDepartamento",a),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:function(a){$("#targetVincularDepartamento").html(a),$("#listarDepartamentosVinculados").show()}})}else $("#targetVincularDepartamento").html('<select class="form-control textoMay" name="departamentoVincularDepartamento" id="departamentoVincularDepartamento" readonly><option></option></select>'),$("#misVinculosSucursalDepartamento").empty(),$("#listarDepartamentosVinculados").hide()}),$("#anadirVinculoSucursalDepartamento").click(function(a){a.preventDefault();let e=$("#departamentoVincularDepartamento option:selected").text().toUpperCase();if(""!==e){let a=!1;if($("#misVinculosSucursalDepartamento li").each(function(){$(this).text()==e&&(a=!0)}),!a){let a=$("<li></li>").text(e);$(a).attr("id",$("#departamentoVincularDepartamento").val()),$(a).append("<button class='rem'><i class='fa fa-times'></i></button>"),$("#misVinculosSucursalDepartamento").append(a),$(".rem").on("click",function(){$(this).parent().remove()})}$("#departamentoVincularDepartamento").val("")}}),$("#formularioCancelarDepartamento").click(function(){$("#misVinculosSucursalDepartamento").empty(),$("#targetVincularDepartamento").html('<select class="form-control textoMay" name="departamentoVincularDepartamento" id="departamentoVincularDepartamento" readonly><option></option></select>'),$("#listarDepartamentosVinculados").hide()}),$("#listarDepartamentosVinculados").click(function(a){a.preventDefault(),$("#tituloDepartamento").text($("#departamentoVincularSucursal option:selected").text());let e=$("#departamentoVincularSucursal").val(),t=new FormData;t.append("activarDepartamentosVinculados",e),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,success:function(a){$("#cargarRelacionSucursalDepartamento").html(a),$("#totalDepAjax").text($("#cargarRelacionSucursalDepartamento option").length),$("#totalNoDepAjax").text($("#departamentoVincularDepartamento option").length),$("#totalDepAjaxTodos").text($("#departamentoVincularDepartamento option").length+$("#cargarRelacionSucursalDepartamento option").length),$("#desvincularSucursal").click(function(a){a.preventDefault(),null!=$("#ventanaModalDesvincularDepartamento").val()?swal({title:"¿Deseas desvincular el departamento seleccionado?",text:"Antes de continuar verifica que no existan empleados asociados a la SUCURSAL-DEPARTAMENTO seleccionado, ya que los empleados estarán vinculados a una sucursal, pero a ningun departamento.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Sí, desvincular!",allowOutsideClick:!1}).then(a=>{if(a){let a=new FormData;a.append("ventanaModaldepartamento",$("#ventanaModalDesvincularDepartamento").val()),a.append("ventanaModalSucursal",$("#departamentoVincularSucursal").val()),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){if(0==a)swal({type:"error",title:"Ocurrio un error",text:"¡La desvinculación no pudo realizarse!"});else if(1==a){let a=$("#departamentoVincularSucursal").val(),e=new FormData;e.append("activarDepartamentosVinculados",a),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:function(e){$("#cargarRelacionSucursalDepartamento").html(e);let t=new FormData;t.append("activarDepartamento",$("#departamentoVincularSucursal").val()),console.log(a),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,success:function(a){$("#targetVincularDepartamento").html(a),$("#totalDepAjax").text($("#cargarRelacionSucursalDepartamento option").length),$("#totalNoDepAjax").text($("#departamentoVincularDepartamento option").length),$("#totalDepAjaxTodos").text($("#departamentoVincularDepartamento option").length+$("#cargarRelacionSucursalDepartamento option").length)}})}})}}})}}).catch(swal.noop):swal({type:"error",title:"Selecciona un departamento",text:""})})}})}),$(".borrarPuesto").click(function(){let a=$(this).parent().parent().attr("id");swal({title:"¿Estas seguro de borrar el registro?",text:"Antes de continuar verifica que ninguna sucursal-departamento tenga vinculado este puesto",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Sí, borrar!"}).then(e=>{if(e){let e=new FormData;e.append("idPuestoEliminar",a),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:function(a){0==a?swal({type:"error",title:"Ocurrio un error",text:"¡El registro no pudo ser borrado!"}):1==a&&swal({type:"success",title:"El registro se ha borrado correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&window.location.reload()}).catch(swal.noop)}})}}).catch(swal.noop)});let u=document.getElementById("formularioVincularSucursalDepartamentoPuesto");$("#formularioVincularSucursalDepartamentoPuesto").submit(function(a){let e="";a.preventDefault();let t=new FormData(u);$("#misVinculosSucursalDepartamentoPuesto li").each(function(){e+=$(this).attr("id")+","}),t.append("arregloVinculacionSucursalDepartamentoPuesto",e),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,success:function(a){0==a?swal({type:"success",title:"El registro se realizo correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&(u.reset(),$("#targetDepartamentoPuesto").html('<select class="form-control" name="departamentoNuevoPuesto" id="departamentoNuevoPuesto" readonly required><option></option></select>'),$("#targetPuestoPuesto").html('<select class="form-control" name="mostrarTodosPuestos" id="mostrarTodosPuestos" readonly><option></option></select>'),$("#misVinculosSucursalDepartamentoPuesto").empty(),$("#listarPuestosVinculados").hide())}).catch(swal.noop):1==a?swal({type:"error",title:"Ocurrio un error, intentalo nuevamente",text:"Asegurate que no exista previamente una vinculación entre la sucursal, departamento y el puesto seleccionado",allowOutsideClick:!1}):2==a?swal({type:"success",title:"El registro se actualizo correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&(location.href="puesto")}).catch(swal.noop):3==a?swal("Selecciona un departamento","","warning"):4==a?swal("Verifica que al menos un puesto este añadido","","warning"):swal(a,"","warning")}})}),$("#listarPuestosVinculados").hide(),$("#sucursalNuevaPuesto").change(function(){let a=$("#sucursalNuevaPuesto").val();if(""!==a){$("#targetDepartamentoPuesto").html('<select class="form-control" name="departamentoNuevoPuesto" id="departamentoNuevoPuesto" required><option></option></select>');let e=new FormData;e.append("sucursalDepartamento",a),e.append("interfazVincularPuesto",!0),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:function(a){$("#targetDepartamentoPuesto").html(a),$("#departamentoNuevoPuesto").change(function(){cargarVinculacionPuestos()})}})}else $("#targetDepartamentoPuesto").html('<select class="form-control" name="departamentoNuevoPuesto" id="departamentoNuevoPuesto" readonly required><option></option></select>'),$("#targetPuestoPuesto").html('<select class="form-control" name="mostrarTodosPuestos" id="mostrarTodosPuestos" readonly><option></option></select>'),$("#misVinculosSucursalDepartamentoPuesto").empty(),$("#listarPuestosVinculados").hide()}),$("#departamentoNuevoPuesto").change(function(){cargarVinculacionPuestos()}),$("#anadirVinculoSucursalDepartamentoPuesto").click(function(a){a.preventDefault();let e=$("#mostrarTodosPuestos option:selected").text().toUpperCase();if(""!==e){let a=!1;if($("#misVinculosSucursalDepartamentoPuesto li").each(function(){$(this).text()==e&&(a=!0)}),!a){let a=$("<li></li>").text(e);$(a).attr("id",$("#mostrarTodosPuestos").val()),$(a).append("<button class='rem'><i class='fa fa-times'></i></button>"),$("#misVinculosSucursalDepartamentoPuesto").append(a),$(".rem").on("click",function(){$(this).parent().remove()})}$("#mostrarTodosPuestos").val("")}}),$("#formularioCancelarPuesto").click(function(){$("#misVinculosSucursalDepartamentoPuesto").empty(),$("#targetDepartamentoPuesto").html('<select class="form-control" name="departamentoNuevoPuesto" id="departamentoNuevoPuesto" readonly required><option></option></select>'),$("#targetPuestoPuesto").html('<select class="form-control" name="mostrarTodosPuestos" id="mostrarTodosPuestos" readonly><option></option></select>'),$("#listarPuestosVinculados").hide()}),$("#listarPuestosVinculados").click(function(a){a.preventDefault();let e=new FormData;$("#tituloPuesto").text($("#departamentoNuevoPuesto option:selected").text()),$("#tituloPuesto2").text($("#sucursalNuevaPuesto option:selected").text()),e.append("sucursalDepartamentoPuesto2",$("#departamentoNuevoPuesto").val()),e.append("sucursalDepartamentoPuesto",$("#sucursalNuevaPuesto").val()),e.append("indicarInterfaz",!0),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:function(a){$("#cargarRelacionSucursalDepartamentoPuesto").html(a),$("#totalPueAjax").text($("#ventanaModalDesvincularPuesto option").length),$("#totalNoPueAjax").text($("#mostrarTodosPuestos option").length),$("#totalPueAjaxTodos").text($("#ventanaModalDesvincularPuesto option").length+$("#mostrarTodosPuestos option").length),$("#desvincularPuesto").click(function(a){a.preventDefault(),null!=$("#ventanaModalDesvincularPuesto").val()?swal({title:"¿Deseas desvincular el puesto seleccionado?",text:"Antes de continuar verifica que no existan empleados asociados a la SUCURSAL-DEPARTAMENTO-PUESTO seleccionado, ya que los empleados estarán vinculados a una SUCURSAL-DEPARTAMENTO, pero a ningun puesto.",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Sí, desvincular!",allowOutsideClick:!1}).then(a=>{if(a){let a=new FormData;a.append("ventanaModalSucursal2",$("#sucursalNuevaPuesto").val()),a.append("ventanaModaldepartamento2",$("#departamentoNuevoPuesto").val()),a.append("ventanaModalPuesto",$("#ventanaModalDesvincularPuesto").val()),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){if(0==a)swal({type:"error",title:"Ocurrio un error",text:"¡La desvinculación no pudo realizarse!"});else if(1==a){let a=new FormData;a.append("sucursalDepartamentoPuesto2",$("#departamentoNuevoPuesto").val()),a.append("sucursalDepartamentoPuesto",$("#sucursalNuevaPuesto").val()),a.append("indicarInterfaz",!0),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){$("#cargarRelacionSucursalDepartamentoPuesto").html(a);let e=new FormData;e.append("activarPuestoSucursal",$("#sucursalNuevaPuesto").val()),e.append("activarPuestoDepartamento",$("#departamentoNuevoPuesto").val()),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:function(a){$("#targetPuestoPuesto").html(a),$("#totalPueAjax").text($("#ventanaModalDesvincularPuesto option").length),$("#totalNoPueAjax").text($("#mostrarTodosPuestos option").length),$("#totalPueAjaxTodos").text($("#ventanaModalDesvincularPuesto option").length+$("#mostrarTodosPuestos option").length)}})}})}}})}}).catch(swal.noop):swal({type:"error",title:"Selecciona un puesto",text:""})})}})}),$(".borrarDepartamento").click(function(){let a=$(this).parent().parent().attr("id");swal({title:"¿Estas seguro de borrar el registro?",text:"Antes de continuar verifica que ninguna sucursal tenga vinculado este departamento",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Sí, borrar!"}).then(e=>{if(e){let e=new FormData;e.append("idDepartamentoEliminar",a),$.ajax({url:ruta_server+"controllers/ajaxDepartamentosPuestos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:function(a){0==a?swal({type:"error",title:"Ocurrio un error",text:"¡El registro no pudo ser borrado!"}):1==a&&swal({type:"success",title:"El registro se ha borrado correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&window.location.reload()}).catch(swal.noop)}})}}).catch(swal.noop)}),$("#imagenTicketNuevo").change(function(a){formatear(a)});document.getElementById("formularioNuevoTicket");$("#formularioCancelarTicket").click(function(){$("#targetAdjuntar").html('<div class="btn btn-default btn-file"><i class="fa fa-paperclip"></i> Adjuntar<input type="file" id="imagenTicketNuevo" name="imagenTicketNuevo" accept="image/*"></div><p class="help-block">Max. 1MB</p>'),$("#imgenSalidaTicket").attr("src","views/img/ticket.jpg"),$("#imagenTicketNuevo").change(function(a){formatear(a)})}),$("#cargarAjaxCorreos").change(function(){correosAdministrarFiltros()}),$("#buscadorUsuariosCorreos").on("input",function(){correosAdministrarFiltros()}),$(".mostrarUsuarioCorreos").click(function(){mostrarUsuarioCorreos($(this).parent().parent().attr("id"))});var currentYear=(new Date).getFullYear();$("#calendar").calendar({displayWeekNumber:!0,enableContextMenu:!0,enableRangeSelection:!0,style:"background",disabledDays:[new Date(2019,11,25),new Date(2020,0,1)],yearChanged:function(a){console.log("arreeeeeeeeeeeee")},mouseOnDay:function(a){if(a.events.length>0){var e="";for(var t in a.events)e+='<div class="event-tooltip-content"><div class="event-name" style="white-space:nowrap;">'+a.events[t].name+'</div><div class="event-location">'+a.events[t].location+"</div></div>";$(a.element).popover({trigger:"manual",container:"body",html:!0,content:e,placement:"auto"}),$(a.element).popover("show")}},mouseOutDay:function(a){a.events.length>0&&$(a.element).popover("hide")},dayContextMenu:function(a){$(a.element).popover("hide")}}),$("#actualizarCalendario").click(function(){actualizarCalendario()}),$("#tipoSolicitud").change(function(){let a=new FormData;a.append("tipoSolicitud",$("#tipoSolicitud").val()),a.append("idPrincipalPermuta",$("#identificadorUsuarioPermuta").val()),$("#cargarTipoSolicitud").html('<div style="text-align:center"><img src='+ruta_server+"views/img/status.gif></div>"),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){$("#cargarTipoSolicitud").html(a),$("#timepicker").timepicki({start_time:["09","00","AM"]}),$("#timepicker2").timepicki({start_time:["07","00","PM"]}),$("#reservationtime").daterangepicker({locale:{format:"DD-MM-YYYY",separator:" / ",applyLabel:"Aceptar",cancelLabel:"Cancelar",daysOfWeek:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agusto","Septiembre","Octubre","Noviembre","Diciembre"]}}),$("#periodoVacacional,#cambioGuardia").daterangepicker({showCustomRangeLabel:!1,locale:{format:"DD-MM-YYYY",separator:" / ",applyLabel:"Aceptar",cancelLabel:"Cancelar",daysOfWeek:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agusto","Septiembre","Octubre","Noviembre","Diciembre"]}}),$("#cargarImagenPermiso").change(function(a){let e=a.target.files[0],t=/\.(?=jpg|png|jpeg|pdf)/gi.test(e.name);if(!t)return $("#cargarImagenPermiso").val(""),void swal("Sólo se permiten archivos en formato:",".jpg .jpeg .png .pdf","error").catch(swal.noop);let o=2;return e.size>1024*o*1024?($("#cargarImagenPermiso").val(""),void swal("El archivo tiene un tamaño mayor al permitido","El peso máximo es de 2 MB","error").catch(swal.noop)):($("#lienzoArchivosPermisos").html('<i class="icon fa fa-check fa-2x"></i> ARCHIVO: '+e.name+'<button type="button" id="cancelarImagen" class="close" aria-hidden="true">&times;</button>'),void $("#cancelarImagen").click(function(){$("#cargarImagenPermiso").val(""),$("#lienzoArchivosPermisos").html("Si lo deseas puedes adjuntar algún archivo en formato: .jpg, .jpeg, .png o .pdf")}))})}})});let p=document.getElementById("multiformato");$("#formularioCancelarPermiso").click(function(){p.reset(),$("#cargarTipoSolicitud").html("")}),$("#multiformato").submit(function(a){a.preventDefault(),swal({title:"¿La información proporcionada es correcta?",text:"Antes de continuar verifica que todos los campos esten llenados correctamente",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"¡Sí, continuar!"}).then(a=>{if(a){let a=new FormData(p);a.append("extemporaneo",$("#condicionesYterminos:checked").val()),$.ajax({url:ruta_server+"controllers/ajaxPermisos.php",method:"POST",data:a,cache:!1,contentType:!1,processData:!1,success:function(a){0==a?swal("Selecciona el tipo de permiso","","warning"):1==a?swal("Selecciona la fecha","","warning"):2==a?swal("Escribe el motivo para solicitar el permiso","No escribas caracteres especiales","warning"):3==a?swal({type:"success",title:"El registro se realizo correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&(p.reset(),$("#cargarTipoSolicitud").html(""),location.href=ruta_server+"usuariosPass")}).catch(swal.noop):4==a?swal("Ocurrio un error","","error"):5==a?swal("Selecciona al empleado con el que realizaras el cambio de guardia","","warning"):6==a?swal("Selecciona un formato de hora correcto","","warning"):7==a?swal({type:"warning",title:"El usuario con el que quieres realizar el cambio, tiene una solicitud pendiente",text:"No podra aceptar otra solicitud, hasta que responda a la solicitud pendiente",allowOutsideClick:!1}).then(a=>{a&&(p.reset(),$("#cargarTipoSolicitud").html(""),location.href=ruta_server+"usuariosPass")}).catch(swal.noop):swal(a,"","error")}})}}).catch(swal.noop)}),setInterval(function(){recargar_solicitudes()},1e4),$("#expandirVentanaSolicitudes").click(function(){$("#expandirformularioSolicitudes").submit()}),$("#expandirPestanaPaqueteExterno").click(function(){$("#expandirPestanaPaqueteExternoFormulario").submit()}),$("#expandirPestanaTicketHistorial").click(function(){$("#expandirPestanaTicketFormulario").submit()}),$(".cambio-guardia").click(function(a){a.preventDefault(),$("#ventanaPreguntaCambioGuardia").modal("show")}),$(".aceptarCambiodeGuardia").click(function(){formularioGuardia(this)}),$("#imagenPerfilUsuario").change(function(a){let e=a.target.files[0],t=/\.(?=jpg|png|jpeg)/gi.test(e.name);if(!t)return swal("Sólo se permiten imagenes","Formato: .jpg, .jpeg y .png","error").catch(swal.noop),$("#imagenPerfilUsuario").val(""),void $("#imgenSalidaPerfil").attr("src",$("#imgenSalidaPerfil").attr("alt"));let o=2;if(e.size>1024*o*1024)return swal("La imagen tiene un tamaño mayor al permitido","El peso máximo es de 2 MB","error").catch(swal.noop),$("#imagenPerfilUsuario").val(""),void $("#imgenSalidaPerfil").attr("src",$("#imgenSalidaPerfil").attr("alt"));let r=new FileReader;r.onload=fileOnload3,r.readAsDataURL(e)});let d=document.getElementById("formularioImagenPerfil");$("#formularioImagenPerfil").submit(function(a){if(a.preventDefault(),""==$("#imagenPerfilUsuario").val())return void swal("Selecciona una nueva imagen de perfil","","error").catch(swal.noop);let e=new FormData(d);$.ajax({url:ruta_server+"controllers/ajaxUsuarios.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,success:function(a){console.log(a),0==a?swal("Selecciona una nueva imagen de perfil","","error"):1==a?swal("Sólo se permiten imagenes","Formato: .jpg, .jpeg y .png","error"):2==a?swal({type:"error",title:"La imagen tiene un tamaño mayor al permitido",text:"El peso máximo es de 2 MB",allowOutsideClick:!1}).then(a=>{a&&(location.href=ruta_server+"usuariosPass")}).catch(swal.noop):3==a?swal({type:"success",title:"La imagen se actualizó correctamente",text:"",allowOutsideClick:!1}).then(a=>{a&&(location.href=ruta_server+"usuariosPass")}).catch(swal.noop):swal("Ocurrio un error: ",a,"error").catch(swal.noop)}})}),$(".mostrarPermisoUsuario").click(function(){mostrarPermisoUsuario($(this).parent().parent().attr("id"))}),$(".detallesSolicitudUsuario").click(function(){detallesPermisoUsuarios($(this).parent().parent().attr("id"),$(this))}),$(".borrarPermisoUsuario").click(function(){borrarPermisoUsuario($(this).parent().parent().parent().parent().attr("id"))}),$("#aplicarFiltrosSolicitudes").click(function(){filtrosSolicitudes()}),$(".formularioDinamico").click(function(a){switch($(this).parent().parent().attr("target")){case"solicitudes":paginador(a,this);break;case"usuarios":paginador2(a,this);break;case"correos":paginador3(a,this);break;case"equipos":paginador4(a,this);break;case"usuariosPass":paginador5(a,this);break;case"paquetesInternos":paginador6(a,this);break;case"paquetesExternos":paginador7(a,this);break;case"tickets":paginador8(a,this)}}),$(".botonMaxMin,.botonMaxMin2").click(function(){botonMaxMin($(this))}),$(window).resize(function(){actualizarResolucion($(window).width())});class m{static iniciar(a){$("#recargarPeriodos").html('<img src="'+ruta_server+'views/img/status.gif" id="status" class="statusCrow">'),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxRutasDescargas.php",dataType:"json",data:{anioFiscal:a}}).done(function(a){$("#recargarPeriodos").html(a.data),$("#periodoNomina").change(function(){""!=$(this).val()?buscarReciboCFDI():($("#nombreArchivoDescargar").prop("disabled",!0),$("#nombreArchivoDescargar").removeClass("btn-info"))})}).fail(function(a){console.log("Ocurrio un error:",a)})}}$("#anoFiscal").change(function(){""!=$("#tipoRecibo").val()&&""!=$(this).val()?m.iniciar($("#anoFiscal option:selected").text()):($("#recargarPeriodos").html('<select class="form-control textoMay" name="periodoNomina" id="periodoNomina" required readonly><option value=""></option></select>'),$("#nombreArchivoDescargar").prop("disabled",!0),$("#nombreArchivoDescargar").removeClass("btn-info"),$("#tipoRecibo").val(""),$("#tipoRecibo").change())}),$("#tipoRecibo").change(function(){""!=$("#anoFiscal").val()&&""!=$(this).val()?m.iniciar($("#anoFiscal option:selected").text()):($("#recargarPeriodos").html('<select class="form-control textoMay" name="periodoNomina" id="periodoNomina" required readonly><option value=""></option></select>'),$("#nombreArchivoDescargar").prop("disabled",!0),$("#nombreArchivoDescargar").removeClass("btn-info"))}),$("#formatoNomina").change(function(){buscarReciboCFDI()});class f{static listarEmpleados(a){let e=new FormData;e.append("asignarEquipoAUsuario",a),$.ajax({url:ruta_server+"controllers/ajaxEquipos.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(a){$("#targetdestinatarioPaquete").html(a.html),a.verificarSucursalLocal>0?$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{getMensajerosInternos:a.verificarSucursalLocal}}).done(function(a){$("#cargarMensajeroLocal").html('<div class="row"><div class="col-md-6"><p class="callout callout-success">Tu paquete tiene como destino una sucursal local, ¿quieres asignar el paquete a alguno de nuestros mensajeros?, en caso de no hacerlo el personal de recepción lo asignará:</p></div><div class="col-md-6"><label for="">8.-Asignar paquete a:</label><select class="form-control textoMay" name="mensajeroInterno" id="mensajeroInterno"><option value=""></option></select></div></div>');let e=a.mensajeros,t=document.getElementById("mensajeroInterno");for(let o in e){let a=document.createElement("option");a.text=e[o][1],a.value=e[o][0],t.add(a)}}).fail(function(a){console.log("Ocurrio un error:",a)}):$("#cargarMensajeroLocal").html("")}})}static cargarCodigoPostal(a){$("#estadoPaqueteria").html('<img src="'+ruta_server+'views/img/status.gif" id="status" class="statusCrow">'),$("#municipioPaqueteria").html('<img src="'+ruta_server+'views/img/status.gif" id="status" class="statusCrow">');let e="http://"+window.location.host+"/api-codigos-postales-v1/index.php/Codigo/codigo/"+a;fetch(e).then(a=>a.json()).then(a=>{$("#municipioPaqueteria").val(a.municipio),$("#estadoPaqueteria").val(a.estado),$("#targetColoniaPaqueteria").html('<select class="form-control textoMay" id="coloniaPaqueteria" name="coloniaPaqueteria" pattern="[a-zA-ZñÑáéíóúÁÉÍÓÚ0-9\\s.]{2,}" required><option></option></select>');let e,t=a.colonias;t.sort();let o=document.getElementById("coloniaPaqueteria");for(e in t){let a=document.createElement("option");a.text=t[e],o.add(a)}}).catch(function(a){console.log(a)})}static envioInterno(a){let e=new FormData(a);$.ajax({url:ruta_server+"controllers/AjaxPaqueteria.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(e){e.error?swal(e.mensaje,e.mensaje2,e.tipo):swal({type:e.tipo,title:e.mensaje,text:e.mensaje2,allowOutsideClick:!1}).then(e=>{e&&(location.href=ruta_server+"paqueteriaCaptura",a.reset())}).catch(swal.noop)}})}static envioExterno(a){let e=new FormData(a);$.ajax({url:ruta_server+"controllers/AjaxPaqueteria.php",method:"POST",data:e,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(e){e.error?swal(e.mensaje,e.mensaje2,e.tipo):swal({type:e.tipo,title:e.mensaje,text:e.mensaje2,allowOutsideClick:!1}).then(e=>{e&&(location.href=ruta_server+"paqueteriaCaptura",a.reset())}).catch(swal.noop)}})}static detallesPaqueteInterno(a){$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{noEnvioInterno:a}}).done(function(e){$("#targetPaqueteInterno").html(e.datos),$("#targetPaqueteInterno2").html(e.datos2),$("#labelTipoPaquete").html(e.tipo),null!=e.imagen?($("#fotografiaUsuario").attr("src",ruta_server+"views/imagenes-usuarios/mini/"+e.imagen),$("#fotografiaUsuario").attr("alt",ruta_server+"views/imagenes-usuarios/"+e.imagen)):($("#fotografiaUsuario").attr("src",ruta_server+"views/img/user.png"),$("#fotografiaUsuario").attr("alt",ruta_server+"views/img/user.png")),1==e.icono&&(recargar_solicitudes(),$("#"+a).find(".campoDetalle").children().children().html('<i class="fa fa-eye text-black"></i>')),$("#paqueteEntregado").click(function(){swal({title:"Sí haz recibido el paquete presiona el boton aceptar, para que nos indiques sí llego completo y en buen estado",text:"",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar"}).then(e=>{$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{finalizacionPaqueteInterno:a}}).done(function(e){e.error?swal(e.mensaje,e.mensaje2,e.tipo):($("#mostrarPaqueteriaInternaModal").modal("hide"),$("#cuestionarioPaqueteInterno").modal("show"),$("#formularioRecepcionPaqueteInterno").submit(function(e){e.preventDefault(),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{recibidoCompletoInterno:$("#completoInterno").val(),recibidoEstadoInterno:$("#estadoInterno").val(),recibidoComentariosInterno:$("#descripcionRecepcionInterna").val(),paqueterecibidoInterno:a}}).done(function(a){a.error?swal(a.mensaje,a.mensaje2,a.tipo):($("#mostrarPaqueteriaInternaModal").modal("hide"),swal({title:"Se finalizó el proceso correctamente",text:"",type:"success",timer:2e3,showConfirmButton:!1}),location.href=ruta_server+"paqueteriaRevision")}).fail(function(a){console.log("Ocurrio un error:",a)})}))}).fail(function(a){console.log("Ocurrio un error:",a)})}).catch(a=>{$("#mostrarPaqueteriaInternaModal").modal("hide")})}),$("#paqueteCancelarInterno").click(function(){swal({title:"¿ Deseas cancelar el envio de este paquete ?",text:"",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, cancelar",cancelButtonText:"No"}).then(e=>{$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{cancelarPaqueteInterno:a}}).done(function(a){a.error?swal(a.mensaje,a.mensaje2,a.tipo):($("#mostrarPaqueteriaInternaModal").modal("hide"),swal({title:"Se canceló el envio correctamente",text:"",type:"success",timer:2e3,showConfirmButton:!1}),location.href=ruta_server+"paqueteriaRevision")}).fail(function(a){console.log("Ocurrio un error:",a)})}).catch(a=>{$("#mostrarPaqueteriaInternaModal").modal("hide")})}),$("#paqueteRecolectadoInterno").click(function(){swal({title:"Presiona el botón aceptar para avisar al remitente y al destinatario que el paquete ya va en camino",text:"",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(e=>{$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{enCaminoPaqueteInterno:a}}).done(function(a){a.error?swal(a.mensaje,a.mensaje2,a.tipo):($("#mostrarPaqueteriaInternaModal").modal("hide"),swal({title:"Se actualizó el registro correctamente",text:"",
type:"success",timer:2e3,showConfirmButton:!1}),location.href=ruta_server+"paqueteriaRevision")}).fail(function(a){console.log("Ocurrio un error:",a)})}).catch(a=>{$("#mostrarPaqueteriaInternaModal").modal("hide")})}),$("#actualizarPaqueteRecepcionInterna").click(function(){$("#actualizarMensajeriaInterna").html(e.paqueterias),$("#actualizarGuiaInterna").html('<input class="textoMay miSelect" type="text" id="guiaInterna" name="guiaInterna">'),$("#nombrePaqueteria").change(function(){2==$(this).val()?(console.log("Paquete:"+a),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{getMensajerosInternos2:!0}}).done(function(a){$("#actualizarGuiaInterna").html('<select class="textoMay miSelect" style="max-width:194px;" name="guiaInterna" id="guiaInterna"><option value=""></option></select>');let e=a.mensajeros;console.log(e);let t=document.getElementById("guiaInterna");for(let o in e){let a=document.createElement("option");a.text=e[o][1],a.value=e[o][0],t.add(a)}}).fail(function(a){console.log("Ocurrio un error:",a)})):$("#actualizarGuiaInterna").html('<input class="textoMay miSelect" type="text" id="guiaInterna" name="guiaInterna">')}),$("#cambiarBotonInterna").html('<button type="submit" class="btn btn-success">Aceptar</button>'),$("#formularioEnviarPaqueteInterno").submit(function(a){a.preventDefault(),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{nombrePaqueteriaEnvioInterno:$("#nombrePaqueteria").val(),numeroGuiaEnvioInterno:$("#guiaInterna").val(),numeroPaqueteEnvioInterno:e.paquete}}).done(function(a){a.error?swal(a.mensaje,a.mensaje2,a.tipo):swal({type:a.tipo,title:a.mensaje,text:a.mensaje2,allowOutsideClick:!1}).then(a=>{a&&($("#mostrarPaqueteriaInternaModal").modal("hide"),location.href=ruta_server+"paqueteriaRevision")}).catch(swal.noop)}).fail(function(a){console.log("Ocurrio un error:",a)})})})}).fail(function(a){console.log("Ocurrio un error:",a)})}static detallesPaqueteExterno(a){$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{noEnvioExterno:a}}).done(function(e){$("#targetDetallePaqueteExterno").html(e.datos),$("#targetPaqueteExterno").html(e.datos2),null!=e.imagen?($("#fotografiaUsuario2").attr("src",ruta_server+"views/imagenes-usuarios/mini/"+e.imagen),$("#fotografiaUsuario2").attr("alt",ruta_server+"views/imagenes-usuarios/"+e.imagen)):($("#fotografiaUsuario2").attr("src",ruta_server+"views/img/user.png"),$("#fotografiaUsuario2").attr("alt",ruta_server+"views/img/user.png")),1==e.icono&&(recargar_solicitudes(),$("#"+a).find(".campoDetalle").children().children().html('<i class="fa fa-eye text-black"></i>')),$("#paqueteEntregadoExterno").click(function(){swal({title:"Sí el paquete fue recibido presiona el boton aceptar para finalizar el proceso",text:"",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar"}).then(e=>{$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{finalizacionPaqueteExterno:a}}).done(function(a){a.error?swal(a.mensaje,a.mensaje2,a.tipo):($("#mostrarPaqueteriaExternaModal").modal("hide"),swal({title:"Se finalizó el proceso correctamente",text:"",type:"success",timer:2e3,showConfirmButton:!1}),$("#activarPestanaExternos").submit())}).fail(function(a){console.log("Ocurrio un error:",a)})}).catch(a=>{$("#mostrarPaqueteriaExternaModal").modal("hide")})}),$("#paqueteRecolectadoExterno").click(function(){swal({title:"Presiona el botón aceptar para avisar al remitente que el paquete ya va en camino",text:"",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Aceptar",cancelButtonText:"Cancelar"}).then(e=>{$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{enCaminoPaqueteExterno:a}}).done(function(a){a.error?swal(a.mensaje,a.mensaje2,a.tipo):($("#mostrarPaqueteriaExternaModal").modal("hide"),swal({title:"Se actualizó el registro correctamente",text:"",type:"success",timer:2e3,showConfirmButton:!1}),location.href=ruta_server+"paqueteriaRevision")}).fail(function(a){console.log("Ocurrio un error:",a)})}).catch(a=>{$("#mostrarPaqueteriaExternaModal").modal("hide")})}),$("#paqueteCancelarExterno").click(function(){swal({title:"¿ Deseas cancelar el envio de este paquete ?",text:"",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, cancelar",cancelButtonText:"No"}).then(e=>{$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{cancelarPaqueteExterno:a}}).done(function(a){a.error?swal(a.mensaje,a.mensaje2,a.tipo):($("#mostrarPaqueteriaExternaModal").modal("hide"),swal({title:"Se canceló el envio correctamente",text:"",type:"success",timer:2e3,showConfirmButton:!1}),$("#activarPestanaExternos").submit())}).fail(function(a){console.log("Ocurrio un error:",a)})}).catch(a=>{$("#mostrarPaqueteriaExternaModal").modal("hide")})}),$("#actualizarPaqueteRecepcion").click(function(){$("#actualizarMensajeriaExterna").html(e.paqueterias),$("#actualizarGuiaExterna").html('<input class="textoMay miSelect" type="text" id="guia" name="guia">'),$("#cambiarBoton").html('<button type="submit" class="btn btn-success">Aceptar</button>'),$("#formularioEnviarPaqueteExterno").submit(function(a){a.preventDefault(),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{nombrePaqueteriaEnvio:$("#nombrePaqueteria").val(),numeroGuiaEnvio:$("#guia").val(),numeroPaqueteEnvio:e.paquete}}).done(function(a){a.error?swal(a.mensaje,a.mensaje2,a.tipo):swal({type:a.tipo,title:a.mensaje,text:a.mensaje2,allowOutsideClick:!1}).then(a=>{a&&($("#mostrarPaqueteriaExternaModal").modal("hide"),$("#activarPestanaExternos").submit())}).catch(swal.noop)}).fail(function(a){console.log("Ocurrio un error:",a)})})})}).fail(function(a){console.log("Ocurrio un error:",a)})}static filtrosPaquetesInternos(){$("#mostrarDatosPaquetesInternos").html('<div style="text-align:center"><img src="'+ruta_server+'views/img/status.gif"></div>'),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{fechaPaqueteInterno:$("#fechaPaquetesInternos").val(),situacionPaqueteInterno:$("#situacionPaquetesInternos").val(),paginaActual:1,registrosPorPagina:$("#paginacionPaquetesInternos").find("ul").attr("registros"),target:$("#paginacionPaquetesInternos").find("ul").attr("target")}}).done(function(a){$("#mostrarDatosPaquetesInternos").html(a.data),$("#paginacionPaquetesInternos,#paginacionPaquetesInternos2").html(a.mostrar),$(".formularioDinamico").click(function(a){switch($(this).parent().parent().attr("target")){case"solicitudes":paginador(a,this);break;case"usuarios":paginador2(a,this);break;case"correos":paginador3(a,this);break;case"equipos":paginador4(a,this);break;case"usuariosPass":paginador5(a,this);break;case"paquetesInternos":paginador6(a,this);break;case"paquetesExternos":paginador7(a,this);break;case"tickets":paginador8(a,this)}}),$(".mostrarDetallesPaqueteInterno").click(function(){f.detallesPaqueteInterno($(this).parent().parent().attr("id"))}),$(".botonMaxMin").click(function(){botonMaxMin($(this))})}).fail(function(a){console.log("Ocurrio un error:",a)})}static filtrosPaquetesExternos(){$("#mostrarDatosPaquetesExternos").html('<div style="text-align:center"><img src="'+ruta_server+'views/img/status.gif"></div>'),$.ajax({type:"POST",url:ruta_server+"controllers/AjaxPaqueteria.php",dataType:"json",data:{fechaPaqueteExterno:$("#fechaPaquetesExternos").val(),situacionPaqueteExterno:$("#situacionPaquetesExternos").val(),paginaActual:1,registrosPorPagina:$("#paginacionPaquetesExternos").find("ul").attr("registros"),target:$("#paginacionPaquetesExternos").find("ul").attr("target")}}).done(function(a){$("#mostrarDatosPaquetesExternos").html(a.data),$("#paginacionPaquetesExternos,#paginacionPaquetesExternos2").html(a.mostrar),$(".formularioDinamico").click(function(a){switch($(this).parent().parent().attr("target")){case"solicitudes":paginador(a,this);break;case"usuarios":paginador2(a,this);break;case"correos":paginador3(a,this);break;case"equipos":paginador4(a,this);break;case"usuariosPass":paginador5(a,this);break;case"paquetesInternos":paginador6(a,this);break;case"paquetesExternos":paginador7(a,this);break;case"tickets":paginador8(a,this)}}),$(".mostrarDetallesPaqueteExterno").click(function(){f.detallesPaqueteExterno($(this).parent().parent().attr("id"))}),$(".botonMaxMin2").click(function(){botonMaxMin($(this))})}).fail(function(a){console.log("Ocurrio un error:",a)})}static iniciarClase(){$("#sucursalDestinoPaquete").change(function(){""!=$(this).val()?f.listarEmpleados($(this).val()):$("#targetdestinatarioPaquete").html('<select class="form-control textoMay" name="equipoUsuarioCargo" readonly><option></option></select>')}),$("#codigoPostalPaquete").on("input",function(){5==$(this).val().length?f.cargarCodigoPostal($(this).val()):($("#estadoPaqueteria").val(""),$("#municipioPaqueteria").val(""),$("#targetColoniaPaqueteria").html('<select class="form-control textoMay" name="coloniaPaqueteria" readonly required><option></option></select>'))}),$("#formularioPaqueteInterno").submit(function(a){a.preventDefault(),f.envioInterno($(this)[0])}),$("#formularioPaqueteExterno").submit(function(a){a.preventDefault(),f.envioExterno($(this)[0])}),$("#formularioCancelarPaqueteInterno").click(function(){$("#formularioPaqueteInterno")[0].reset(),$("#targetdestinatarioPaquete").html('<select class="form-control textoMay" name="equipoUsuarioCargo"  readonly><option></option></select>'),$("#cargarMensajeroLocal").html("")}),$("#formularioCancelarPaqueteExterno").click(function(){$("#formularioPaqueteExterno")[0].reset(),$("#estadoPaqueteria").val(""),$("#municipioPaqueteria").val(""),$("#targetColoniaPaqueteria").html('<select class="form-control textoMay" name="coloniaPaqueteria" readonly required><option></option></select>')}),$(".mostrarDetallesPaqueteInterno").click(function(){f.detallesPaqueteInterno($(this).parent().parent().attr("id"))}),$("#aplicarFiltrosPaquetesInternos").click(function(){""===$("#fechaPaquetesInternos").val()&&1==$("#situacionPaquetesInternos").val()||($("#fechaPaquetesInternos").val(""),$("#situacionPaquetesInternos").val(1),$("#situacionPaquetesInternos").change(),f.filtrosPaquetesInternos())}),$("#fechaPaquetesInternos").change(function(){MetodosDiversos.init_validate_date($(this).val())&&f.filtrosPaquetesInternos()}),$("#situacionPaquetesInternos").change(function(){f.filtrosPaquetesInternos()}),$("#aplicarFiltrosPaquetesExternos").click(function(){""===$("#fechaPaquetesExternos").val()&&1==$("#situacionPaquetesExternos").val()||($("#fechaPaquetesExternos").val(""),$("#situacionPaquetesExternos").val(1),$("#situacionPaquetesExternos").change(),f.filtrosPaquetesInternos()),f.filtrosPaquetesExternos()}),$("#fechaPaquetesExternos").change(function(){MetodosDiversos.init_validate_date($(this).val())&&f.filtrosPaquetesExternos()}),$("#situacionPaquetesExternos").change(function(){f.filtrosPaquetesExternos()}),$(".mostrarDetallesPaqueteExterno").click(function(){f.detallesPaqueteExterno($(this).parent().parent().attr("id"))})}}f.iniciarClase(),$(".formularioInicio").click(function(){if(""!=$("#usuarioIngreso").val()){let a=document.createElement("input");a.type="hidden",a.name="solicitarLinkAcceso",a.value=!0,$("#formIngreso")[0].appendChild(a),$("#formIngreso").submit()}else swal({title:"",text:"Escribe el nombre de usuario y vuelve a dar click en esta opción",type:"error",timer:2e4,showConfirmButton:!0,allowOutsideClick:!1}).catch(swal.noop)}),$("#mibonX").click(function(){console.log("inicia descargar")}),window.onload=function(){console.log("cargar finalizada")};